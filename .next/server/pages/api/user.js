"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/user";
exports.ids = ["pages/api/user"];
exports.modules = {

/***/ "ajv":
/*!**********************!*\
  !*** external "ajv" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("ajv");

/***/ }),

/***/ "bcryptjs":
/*!***************************!*\
  !*** external "bcryptjs" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("bcryptjs");

/***/ }),

/***/ "cloudinary":
/*!*****************************!*\
  !*** external "cloudinary" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("cloudinary");

/***/ }),

/***/ "connect-mongo":
/*!********************************!*\
  !*** external "connect-mongo" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("connect-mongo");

/***/ }),

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "multer":
/*!*************************!*\
  !*** external "multer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("multer");

/***/ }),

/***/ "passport":
/*!***************************!*\
  !*** external "passport" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("passport");

/***/ }),

/***/ "passport-local":
/*!*********************************!*\
  !*** external "passport-local" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("passport-local");

/***/ }),

/***/ "slug":
/*!***********************!*\
  !*** external "slug" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("slug");

/***/ }),

/***/ "validator/lib/normalizeEmail":
/*!***********************************************!*\
  !*** external "validator/lib/normalizeEmail" ***!
  \***********************************************/
/***/ ((module) => {

module.exports = require("validator/lib/normalizeEmail");

/***/ }),

/***/ "nanoid":
/*!*************************!*\
  !*** external "nanoid" ***!
  \*************************/
/***/ ((module) => {

module.exports = import("nanoid");;

/***/ }),

/***/ "next-connect":
/*!*******************************!*\
  !*** external "next-connect" ***!
  \*******************************/
/***/ ((module) => {

module.exports = import("next-connect");;

/***/ }),

/***/ "next-session":
/*!*******************************!*\
  !*** external "next-session" ***!
  \*******************************/
/***/ ((module) => {

module.exports = import("next-session");;

/***/ }),

/***/ "next-session/lib/compat":
/*!******************************************!*\
  !*** external "next-session/lib/compat" ***!
  \******************************************/
/***/ ((module) => {

module.exports = import("next-session/lib/compat");;

/***/ }),

/***/ "swr":
/*!**********************!*\
  !*** external "swr" ***!
  \**********************/
/***/ ((module) => {

module.exports = import("swr");;

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/./api-lib/auth/index.js":
/*!*******************************!*\
  !*** ./api-lib/auth/index.js ***!
  \*******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"passport\": () => (/* reexport safe */ _passport__WEBPACK_IMPORTED_MODULE_0__[\"default\"])\n/* harmony export */ });\n/* harmony import */ var _passport__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./passport */ \"(api)/./api-lib/auth/passport.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_passport__WEBPACK_IMPORTED_MODULE_0__]);\n_passport__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9hcGktbGliL2F1dGgvaW5kZXguanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBaUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMtbW9uZ29kYi1hcHAvLi9hcGktbGliL2F1dGgvaW5kZXguanM/NjkyYSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgeyBkZWZhdWx0IGFzIHBhc3Nwb3J0IH0gZnJvbSAnLi9wYXNzcG9ydCc7XHJcbiJdLCJuYW1lcyI6WyJkZWZhdWx0IiwicGFzc3BvcnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./api-lib/auth/index.js\n");

/***/ }),

/***/ "(api)/./api-lib/auth/passport.js":
/*!**********************************!*\
  !*** ./api-lib/auth/passport.js ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _api_lib_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/api-lib/db */ \"(api)/./api-lib/db/index.js\");\n/* harmony import */ var passport__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! passport */ \"passport\");\n/* harmony import */ var passport__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(passport__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var passport_local__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! passport-local */ \"passport-local\");\n/* harmony import */ var passport_local__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(passport_local__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _mongodb__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../mongodb */ \"(api)/./api-lib/mongodb.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_api_lib_db__WEBPACK_IMPORTED_MODULE_0__]);\n_api_lib_db__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\npassport__WEBPACK_IMPORTED_MODULE_1___default().serializeUser((user, done)=>{\n    done(null, user._id);\n});\npassport__WEBPACK_IMPORTED_MODULE_1___default().deserializeUser((req, id, done)=>{\n    (0,_mongodb__WEBPACK_IMPORTED_MODULE_3__.getMongoDb)().then((db)=>{\n        (0,_api_lib_db__WEBPACK_IMPORTED_MODULE_0__.findUserForAuth)(db, id).then((user)=>done(null, user), (err)=>done(err));\n    });\n});\npassport__WEBPACK_IMPORTED_MODULE_1___default().use(new passport_local__WEBPACK_IMPORTED_MODULE_2__.Strategy({\n    usernameField: \"email\",\n    passReqToCallback: true\n}, async (req, email, password, done)=>{\n    const db = await (0,_mongodb__WEBPACK_IMPORTED_MODULE_3__.getMongoDb)();\n    const user = await (0,_api_lib_db__WEBPACK_IMPORTED_MODULE_0__.findUserWithEmailAndPassword)(db, email, password);\n    if (user) done(null, user);\n    else done(null, false, {\n        message: \"Email or password is incorrect\"\n    });\n}));\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((passport__WEBPACK_IMPORTED_MODULE_1___default()));\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9hcGktbGliL2F1dGgvcGFzc3BvcnQuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUE2RTtBQUM3QztBQUMyQjtBQUNuQjtBQUV4Q0UsNkRBQXNCLENBQUMsQ0FBQ0ssSUFBSSxFQUFFQyxJQUFJLEdBQUs7SUFDckNBLElBQUksQ0FBQyxJQUFJLEVBQUVELElBQUksQ0FBQ0UsR0FBRyxDQUFDLENBQUM7QUFDdkIsQ0FBQyxDQUFDLENBQUM7QUFFSFAsK0RBQXdCLENBQUMsQ0FBQ1MsR0FBRyxFQUFFQyxFQUFFLEVBQUVKLElBQUksR0FBSztJQUMxQ0gsb0RBQVUsRUFBRSxDQUFDUSxJQUFJLENBQUMsQ0FBQ0MsRUFBRSxHQUFLO1FBQ3hCZCw0REFBZSxDQUFDYyxFQUFFLEVBQUVGLEVBQUUsQ0FBQyxDQUFDQyxJQUFJLENBQzFCLENBQUNOLElBQUksR0FBS0MsSUFBSSxDQUFDLElBQUksRUFBRUQsSUFBSSxDQUFDLEVBQzFCLENBQUNRLEdBQUcsR0FBS1AsSUFBSSxDQUFDTyxHQUFHLENBQUMsQ0FDbkIsQ0FBQztJQUNKLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUM7QUFFSGIsbURBQVksQ0FDVixJQUFJRSxvREFBYSxDQUNmO0lBQUVhLGFBQWEsRUFBRSxPQUFPO0lBQUVDLGlCQUFpQixFQUFFLElBQUk7Q0FBRSxFQUNuRCxPQUFPUCxHQUFHLEVBQUVRLEtBQUssRUFBRUMsUUFBUSxFQUFFWixJQUFJLEdBQUs7SUFDcEMsTUFBTU0sRUFBRSxHQUFHLE1BQU1ULG9EQUFVLEVBQUU7SUFDN0IsTUFBTUUsSUFBSSxHQUFHLE1BQU1OLHlFQUE0QixDQUFDYSxFQUFFLEVBQUVLLEtBQUssRUFBRUMsUUFBUSxDQUFDO0lBQ3BFLElBQUliLElBQUksRUFBRUMsSUFBSSxDQUFDLElBQUksRUFBRUQsSUFBSSxDQUFDLENBQUM7U0FDdEJDLElBQUksQ0FBQyxJQUFJLEVBQUUsS0FBSyxFQUFFO1FBQUVhLE9BQU8sRUFBRSxnQ0FBZ0M7S0FBRSxDQUFDLENBQUM7QUFDeEUsQ0FBQyxDQUNGLENBQ0YsQ0FBQztBQUVGLGlFQUFlbkIsaURBQVEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy1tb25nb2RiLWFwcC8uL2FwaS1saWIvYXV0aC9wYXNzcG9ydC5qcz8yZGE1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGZpbmRVc2VyRm9yQXV0aCwgZmluZFVzZXJXaXRoRW1haWxBbmRQYXNzd29yZCB9IGZyb20gJ0AvYXBpLWxpYi9kYic7XHJcbmltcG9ydCBwYXNzcG9ydCBmcm9tICdwYXNzcG9ydCc7XHJcbmltcG9ydCB7IFN0cmF0ZWd5IGFzIExvY2FsU3RyYXRlZ3kgfSBmcm9tICdwYXNzcG9ydC1sb2NhbCc7XHJcbmltcG9ydCB7IGdldE1vbmdvRGIgfSBmcm9tICcuLi9tb25nb2RiJztcclxuXHJcbnBhc3Nwb3J0LnNlcmlhbGl6ZVVzZXIoKHVzZXIsIGRvbmUpID0+IHtcclxuICBkb25lKG51bGwsIHVzZXIuX2lkKTtcclxufSk7XHJcblxyXG5wYXNzcG9ydC5kZXNlcmlhbGl6ZVVzZXIoKHJlcSwgaWQsIGRvbmUpID0+IHtcclxuICBnZXRNb25nb0RiKCkudGhlbigoZGIpID0+IHtcclxuICAgIGZpbmRVc2VyRm9yQXV0aChkYiwgaWQpLnRoZW4oXHJcbiAgICAgICh1c2VyKSA9PiBkb25lKG51bGwsIHVzZXIpLFxyXG4gICAgICAoZXJyKSA9PiBkb25lKGVycilcclxuICAgICk7XHJcbiAgfSk7XHJcbn0pO1xyXG5cclxucGFzc3BvcnQudXNlKFxyXG4gIG5ldyBMb2NhbFN0cmF0ZWd5KFxyXG4gICAgeyB1c2VybmFtZUZpZWxkOiAnZW1haWwnLCBwYXNzUmVxVG9DYWxsYmFjazogdHJ1ZSB9LFxyXG4gICAgYXN5bmMgKHJlcSwgZW1haWwsIHBhc3N3b3JkLCBkb25lKSA9PiB7XHJcbiAgICAgIGNvbnN0IGRiID0gYXdhaXQgZ2V0TW9uZ29EYigpO1xyXG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgZmluZFVzZXJXaXRoRW1haWxBbmRQYXNzd29yZChkYiwgZW1haWwsIHBhc3N3b3JkKTtcclxuICAgICAgaWYgKHVzZXIpIGRvbmUobnVsbCwgdXNlcik7XHJcbiAgICAgIGVsc2UgZG9uZShudWxsLCBmYWxzZSwgeyBtZXNzYWdlOiAnRW1haWwgb3IgcGFzc3dvcmQgaXMgaW5jb3JyZWN0JyB9KTtcclxuICAgIH1cclxuICApXHJcbik7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBwYXNzcG9ydDtcclxuIl0sIm5hbWVzIjpbImZpbmRVc2VyRm9yQXV0aCIsImZpbmRVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQiLCJwYXNzcG9ydCIsIlN0cmF0ZWd5IiwiTG9jYWxTdHJhdGVneSIsImdldE1vbmdvRGIiLCJzZXJpYWxpemVVc2VyIiwidXNlciIsImRvbmUiLCJfaWQiLCJkZXNlcmlhbGl6ZVVzZXIiLCJyZXEiLCJpZCIsInRoZW4iLCJkYiIsImVyciIsInVzZSIsInVzZXJuYW1lRmllbGQiLCJwYXNzUmVxVG9DYWxsYmFjayIsImVtYWlsIiwicGFzc3dvcmQiLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./api-lib/auth/passport.js\n");

/***/ }),

/***/ "(api)/./api-lib/constants.js":
/*!******************************!*\
  !*** ./api-lib/constants.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ValidateProps\": () => (/* binding */ ValidateProps)\n/* harmony export */ });\nconst ValidateProps = {\n    user: {\n        username: {\n            type: \"string\",\n            minLength: 4,\n            maxLength: 20\n        },\n        name: {\n            type: \"string\",\n            minLength: 1,\n            maxLength: 50\n        },\n        password: {\n            type: \"string\",\n            minLength: 8\n        },\n        email: {\n            type: \"string\",\n            minLength: 1\n        },\n        bio: {\n            type: \"string\",\n            minLength: 0,\n            maxLength: 160\n        }\n    },\n    post: {\n        content: {\n            type: \"string\",\n            minLength: 1,\n            maxLength: 280\n        }\n    },\n    comment: {\n        content: {\n            type: \"string\",\n            minLength: 1,\n            maxLength: 280\n        }\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9hcGktbGliL2NvbnN0YW50cy5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU8sTUFBTUEsYUFBYSxHQUFHO0lBQzNCQyxJQUFJLEVBQUU7UUFDSkMsUUFBUSxFQUFFO1lBQUVDLElBQUksRUFBRSxRQUFRO1lBQUVDLFNBQVMsRUFBRSxDQUFDO1lBQUVDLFNBQVMsRUFBRSxFQUFFO1NBQUU7UUFDekRDLElBQUksRUFBRTtZQUFFSCxJQUFJLEVBQUUsUUFBUTtZQUFFQyxTQUFTLEVBQUUsQ0FBQztZQUFFQyxTQUFTLEVBQUUsRUFBRTtTQUFFO1FBQ3JERSxRQUFRLEVBQUU7WUFBRUosSUFBSSxFQUFFLFFBQVE7WUFBRUMsU0FBUyxFQUFFLENBQUM7U0FBRTtRQUMxQ0ksS0FBSyxFQUFFO1lBQUVMLElBQUksRUFBRSxRQUFRO1lBQUVDLFNBQVMsRUFBRSxDQUFDO1NBQUU7UUFDdkNLLEdBQUcsRUFBRTtZQUFFTixJQUFJLEVBQUUsUUFBUTtZQUFFQyxTQUFTLEVBQUUsQ0FBQztZQUFFQyxTQUFTLEVBQUUsR0FBRztTQUFFO0tBQ3REO0lBQ0RLLElBQUksRUFBRTtRQUNKQyxPQUFPLEVBQUU7WUFBRVIsSUFBSSxFQUFFLFFBQVE7WUFBRUMsU0FBUyxFQUFFLENBQUM7WUFBRUMsU0FBUyxFQUFFLEdBQUc7U0FBRTtLQUMxRDtJQUNETyxPQUFPLEVBQUU7UUFDUEQsT0FBTyxFQUFFO1lBQUVSLElBQUksRUFBRSxRQUFRO1lBQUVDLFNBQVMsRUFBRSxDQUFDO1lBQUVDLFNBQVMsRUFBRSxHQUFHO1NBQUU7S0FDMUQ7Q0FDRixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLW1vbmdvZGItYXBwLy4vYXBpLWxpYi9jb25zdGFudHMuanM/NDcyMyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgVmFsaWRhdGVQcm9wcyA9IHtcclxuICB1c2VyOiB7XHJcbiAgICB1c2VybmFtZTogeyB0eXBlOiAnc3RyaW5nJywgbWluTGVuZ3RoOiA0LCBtYXhMZW5ndGg6IDIwIH0sXHJcbiAgICBuYW1lOiB7IHR5cGU6ICdzdHJpbmcnLCBtaW5MZW5ndGg6IDEsIG1heExlbmd0aDogNTAgfSxcclxuICAgIHBhc3N3b3JkOiB7IHR5cGU6ICdzdHJpbmcnLCBtaW5MZW5ndGg6IDggfSxcclxuICAgIGVtYWlsOiB7IHR5cGU6ICdzdHJpbmcnLCBtaW5MZW5ndGg6IDEgfSxcclxuICAgIGJpbzogeyB0eXBlOiAnc3RyaW5nJywgbWluTGVuZ3RoOiAwLCBtYXhMZW5ndGg6IDE2MCB9LFxyXG4gIH0sXHJcbiAgcG9zdDoge1xyXG4gICAgY29udGVudDogeyB0eXBlOiAnc3RyaW5nJywgbWluTGVuZ3RoOiAxLCBtYXhMZW5ndGg6IDI4MCB9LFxyXG4gIH0sXHJcbiAgY29tbWVudDoge1xyXG4gICAgY29udGVudDogeyB0eXBlOiAnc3RyaW5nJywgbWluTGVuZ3RoOiAxLCBtYXhMZW5ndGg6IDI4MCB9LFxyXG4gIH0sXHJcbn07XHJcbiJdLCJuYW1lcyI6WyJWYWxpZGF0ZVByb3BzIiwidXNlciIsInVzZXJuYW1lIiwidHlwZSIsIm1pbkxlbmd0aCIsIm1heExlbmd0aCIsIm5hbWUiLCJwYXNzd29yZCIsImVtYWlsIiwiYmlvIiwicG9zdCIsImNvbnRlbnQiLCJjb21tZW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./api-lib/constants.js\n");

/***/ }),

/***/ "(api)/./api-lib/db/index.js":
/*!*****************************!*\
  !*** ./api-lib/db/index.js ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _post__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./post */ \"(api)/./api-lib/db/post.js\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _post__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _post__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _token__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./token */ \"(api)/./api-lib/db/token.js\");\n/* harmony import */ var _user__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./user */ \"(api)/./api-lib/db/user.js\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _user__WEBPACK_IMPORTED_MODULE_2__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _user__WEBPACK_IMPORTED_MODULE_2__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_token__WEBPACK_IMPORTED_MODULE_1__]);\n_token__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _token__WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _token__WEBPACK_IMPORTED_MODULE_1__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n\n\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9hcGktbGliL2RiL2luZGV4LmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBdUI7QUFDQztBQUNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLW1vbmdvZGItYXBwLy4vYXBpLWxpYi9kYi9pbmRleC5qcz83ZDhkIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4vcG9zdCc7XHJcbmV4cG9ydCAqIGZyb20gJy4vdG9rZW4nO1xyXG5leHBvcnQgKiBmcm9tICcuL3VzZXInO1xyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./api-lib/db/index.js\n");

/***/ }),

/***/ "(api)/./api-lib/db/post.js":
/*!****************************!*\
  !*** ./api-lib/db/post.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"deletePostById\": () => (/* binding */ deletePostById),\n/* harmony export */   \"findAllPostsForAdmin\": () => (/* binding */ findAllPostsForAdmin),\n/* harmony export */   \"findPostById\": () => (/* binding */ findPostById),\n/* harmony export */   \"findPosts\": () => (/* binding */ findPosts),\n/* harmony export */   \"insertPost\": () => (/* binding */ insertPost),\n/* harmony export */   \"removePost\": () => (/* binding */ removePost)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _user__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./user */ \"(api)/./api-lib/db/user.js\");\n\n\nasync function findPostById(db, id) {\n    const posts = await db.collection(\"posts\").aggregate([\n        {\n            $match: {\n                _id: new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId(id)\n            }\n        },\n        {\n            $limit: 1\n        },\n        {\n            $lookup: {\n                from: \"users\",\n                localField: \"creatorId\",\n                foreignField: \"_id\",\n                as: \"creator\"\n            }\n        },\n        {\n            $unwind: \"$creator\"\n        },\n        {\n            $project: (0,_user__WEBPACK_IMPORTED_MODULE_1__.dbProjectionUsers)(\"creator.\")\n        }, \n    ]).toArray();\n    if (!posts[0]) return null;\n    return posts[0];\n}\nasync function findPosts(db, before, by, limit = 10) {\n    return db.collection(\"posts\").aggregate([\n        {\n            $match: {\n                ...by && {\n                    creatorId: new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId(by)\n                },\n                ...before && {\n                    createdAt: {\n                        $lt: before\n                    }\n                }\n            }\n        },\n        {\n            $sort: {\n                _id: -1\n            }\n        },\n        {\n            $limit: limit\n        },\n        {\n            $lookup: {\n                from: \"users\",\n                localField: \"creatorId\",\n                foreignField: \"_id\",\n                as: \"creator\"\n            }\n        },\n        {\n            $unwind: \"$creator\"\n        },\n        {\n            $project: (0,_user__WEBPACK_IMPORTED_MODULE_1__.dbProjectionUsers)(\"creator.\")\n        }, \n    ]).toArray();\n}\nasync function insertPost(db, { content , creatorId , image  }) {\n    const post = {\n        content,\n        creatorId,\n        createdAt: new Date(),\n        ...image && {\n            image\n        }\n    };\n    const { insertedId  } = await db.collection(\"posts\").insertOne(post);\n    post._id = insertedId;\n    return post;\n}\nasync function deletePostById(db, id) {\n    return db.collection(\"posts\").deleteOne({\n        _id: new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId(id)\n    });\n}\nasync function removePost(db, id) {\n    // Delete the post\n    await db.collection(\"posts\").deleteOne({\n        _id: new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId(id)\n    });\n    // Delete all comments for this post\n    await db.collection(\"comments\").deleteMany({\n        postId: new mongodb__WEBPACK_IMPORTED_MODULE_0__.ObjectId(id)\n    });\n}\nasync function findAllPostsForAdmin(db, limit = 50) {\n    return db.collection(\"posts\").aggregate([\n        {\n            $sort: {\n                _id: -1\n            }\n        },\n        {\n            $limit: limit\n        },\n        {\n            $lookup: {\n                from: \"users\",\n                localField: \"creatorId\",\n                foreignField: \"_id\",\n                as: \"creator\"\n            }\n        },\n        {\n            $unwind: \"$creator\"\n        },\n        {\n            $project: (0,_user__WEBPACK_IMPORTED_MODULE_1__.dbProjectionUsers)(\"creator.\")\n        }, \n    ]).toArray();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9hcGktbGliL2RiL3Bvc3QuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQW1DO0FBQ1E7QUFFcEMsZUFBZUUsWUFBWSxDQUFDQyxFQUFFLEVBQUVDLEVBQUUsRUFBRTtJQUN6QyxNQUFNQyxLQUFLLEdBQUcsTUFBTUYsRUFBRSxDQUNuQkcsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUNuQkMsU0FBUyxDQUFDO1FBQ1Q7WUFBRUMsTUFBTSxFQUFFO2dCQUFFQyxHQUFHLEVBQUUsSUFBSVQsNkNBQVEsQ0FBQ0ksRUFBRSxDQUFDO2FBQUU7U0FBRTtRQUNyQztZQUFFTSxNQUFNLEVBQUUsQ0FBQztTQUFFO1FBQ2I7WUFDRUMsT0FBTyxFQUFFO2dCQUNQQyxJQUFJLEVBQUUsT0FBTztnQkFDYkMsVUFBVSxFQUFFLFdBQVc7Z0JBQ3ZCQyxZQUFZLEVBQUUsS0FBSztnQkFDbkJDLEVBQUUsRUFBRSxTQUFTO2FBQ2Q7U0FDRjtRQUNEO1lBQUVDLE9BQU8sRUFBRSxVQUFVO1NBQUU7UUFDdkI7WUFBRUMsUUFBUSxFQUFFaEIsd0RBQWlCLENBQUMsVUFBVSxDQUFDO1NBQUU7S0FDNUMsQ0FBQyxDQUNEaUIsT0FBTyxFQUFFO0lBQ1osSUFBSSxDQUFDYixLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsT0FBTyxJQUFJLENBQUM7SUFDM0IsT0FBT0EsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2xCLENBQUM7QUFFTSxlQUFlYyxTQUFTLENBQUNoQixFQUFFLEVBQUVpQixNQUFNLEVBQUVDLEVBQUUsRUFBRUMsS0FBSyxHQUFHLEVBQUUsRUFBRTtJQUMxRCxPQUFPbkIsRUFBRSxDQUNORyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQ25CQyxTQUFTLENBQUM7UUFDVDtZQUNFQyxNQUFNLEVBQUU7Z0JBQ04sR0FBSWEsRUFBRSxJQUFJO29CQUFFRSxTQUFTLEVBQUUsSUFBSXZCLDZDQUFRLENBQUNxQixFQUFFLENBQUM7aUJBQUU7Z0JBQ3pDLEdBQUlELE1BQU0sSUFBSTtvQkFBRUksU0FBUyxFQUFFO3dCQUFFQyxHQUFHLEVBQUVMLE1BQU07cUJBQUU7aUJBQUU7YUFDN0M7U0FDRjtRQUNEO1lBQUVNLEtBQUssRUFBRTtnQkFBRWpCLEdBQUcsRUFBRSxDQUFDLENBQUM7YUFBRTtTQUFFO1FBQ3RCO1lBQUVDLE1BQU0sRUFBRVksS0FBSztTQUFFO1FBQ2pCO1lBQ0VYLE9BQU8sRUFBRTtnQkFDUEMsSUFBSSxFQUFFLE9BQU87Z0JBQ2JDLFVBQVUsRUFBRSxXQUFXO2dCQUN2QkMsWUFBWSxFQUFFLEtBQUs7Z0JBQ25CQyxFQUFFLEVBQUUsU0FBUzthQUNkO1NBQ0Y7UUFDRDtZQUFFQyxPQUFPLEVBQUUsVUFBVTtTQUFFO1FBQ3ZCO1lBQUVDLFFBQVEsRUFBRWhCLHdEQUFpQixDQUFDLFVBQVUsQ0FBQztTQUFFO0tBQzVDLENBQUMsQ0FDRGlCLE9BQU8sRUFBRSxDQUFDO0FBQ2YsQ0FBQztBQUVNLGVBQWVTLFVBQVUsQ0FBQ3hCLEVBQUUsRUFBRSxFQUFFeUIsT0FBTyxHQUFFTCxTQUFTLEdBQUVNLEtBQUssR0FBRSxFQUFFO0lBQ2xFLE1BQU1DLElBQUksR0FBRztRQUNYRixPQUFPO1FBQ1BMLFNBQVM7UUFDVEMsU0FBUyxFQUFFLElBQUlPLElBQUksRUFBRTtRQUNyQixHQUFJRixLQUFLLElBQUk7WUFBRUEsS0FBSztTQUFFO0tBQ3ZCO0lBQ0QsTUFBTSxFQUFFRyxVQUFVLEdBQUUsR0FBRyxNQUFNN0IsRUFBRSxDQUFDRyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUMyQixTQUFTLENBQUNILElBQUksQ0FBQztJQUNuRUEsSUFBSSxDQUFDckIsR0FBRyxHQUFHdUIsVUFBVSxDQUFDO0lBQ3RCLE9BQU9GLElBQUksQ0FBQztBQUNkLENBQUM7QUFFTSxlQUFlSSxjQUFjLENBQUMvQixFQUFFLEVBQUVDLEVBQUUsRUFBRTtJQUMzQyxPQUFPRCxFQUFFLENBQ05HLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FDbkI2QixTQUFTLENBQUM7UUFBRTFCLEdBQUcsRUFBRSxJQUFJVCw2Q0FBUSxDQUFDSSxFQUFFLENBQUM7S0FBRSxDQUFDLENBQUM7QUFDMUMsQ0FBQztBQUVNLGVBQWVnQyxVQUFVLENBQUNqQyxFQUFFLEVBQUVDLEVBQUUsRUFBRTtJQUN2QyxrQkFBa0I7SUFDbEIsTUFBTUQsRUFBRSxDQUFDRyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUM2QixTQUFTLENBQUM7UUFBRTFCLEdBQUcsRUFBRSxJQUFJVCw2Q0FBUSxDQUFDSSxFQUFFLENBQUM7S0FBRSxDQUFDLENBQUM7SUFDbEUsb0NBQW9DO0lBQ3BDLE1BQU1ELEVBQUUsQ0FBQ0csVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDK0IsVUFBVSxDQUFDO1FBQUVDLE1BQU0sRUFBRSxJQUFJdEMsNkNBQVEsQ0FBQ0ksRUFBRSxDQUFDO0tBQUUsQ0FBQyxDQUFDO0FBQzNFLENBQUM7QUFFTSxlQUFlbUMsb0JBQW9CLENBQUNwQyxFQUFFLEVBQUVtQixLQUFLLEdBQUcsRUFBRSxFQUFFO0lBQ3pELE9BQU9uQixFQUFFLENBQ05HLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FDbkJDLFNBQVMsQ0FBQztRQUNUO1lBQUVtQixLQUFLLEVBQUU7Z0JBQUVqQixHQUFHLEVBQUUsQ0FBQyxDQUFDO2FBQUU7U0FBRTtRQUN0QjtZQUFFQyxNQUFNLEVBQUVZLEtBQUs7U0FBRTtRQUNqQjtZQUNFWCxPQUFPLEVBQUU7Z0JBQ1BDLElBQUksRUFBRSxPQUFPO2dCQUNiQyxVQUFVLEVBQUUsV0FBVztnQkFDdkJDLFlBQVksRUFBRSxLQUFLO2dCQUNuQkMsRUFBRSxFQUFFLFNBQVM7YUFDZDtTQUNGO1FBQ0Q7WUFBRUMsT0FBTyxFQUFFLFVBQVU7U0FBRTtRQUN2QjtZQUFFQyxRQUFRLEVBQUVoQix3REFBaUIsQ0FBQyxVQUFVLENBQUM7U0FBRTtLQUM1QyxDQUFDLENBQ0RpQixPQUFPLEVBQUUsQ0FBQztBQUNmLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMtbW9uZ29kYi1hcHAvLi9hcGktbGliL2RiL3Bvc3QuanM/ZmYzOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBPYmplY3RJZCB9IGZyb20gJ21vbmdvZGInO1xyXG5pbXBvcnQgeyBkYlByb2plY3Rpb25Vc2VycyB9IGZyb20gJy4vdXNlcic7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmluZFBvc3RCeUlkKGRiLCBpZCkge1xyXG4gIGNvbnN0IHBvc3RzID0gYXdhaXQgZGJcclxuICAgIC5jb2xsZWN0aW9uKCdwb3N0cycpXHJcbiAgICAuYWdncmVnYXRlKFtcclxuICAgICAgeyAkbWF0Y2g6IHsgX2lkOiBuZXcgT2JqZWN0SWQoaWQpIH0gfSxcclxuICAgICAgeyAkbGltaXQ6IDEgfSxcclxuICAgICAge1xyXG4gICAgICAgICRsb29rdXA6IHtcclxuICAgICAgICAgIGZyb206ICd1c2VycycsXHJcbiAgICAgICAgICBsb2NhbEZpZWxkOiAnY3JlYXRvcklkJyxcclxuICAgICAgICAgIGZvcmVpZ25GaWVsZDogJ19pZCcsXHJcbiAgICAgICAgICBhczogJ2NyZWF0b3InLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICAgIHsgJHVud2luZDogJyRjcmVhdG9yJyB9LFxyXG4gICAgICB7ICRwcm9qZWN0OiBkYlByb2plY3Rpb25Vc2VycygnY3JlYXRvci4nKSB9LFxyXG4gICAgXSlcclxuICAgIC50b0FycmF5KCk7XHJcbiAgaWYgKCFwb3N0c1swXSkgcmV0dXJuIG51bGw7XHJcbiAgcmV0dXJuIHBvc3RzWzBdO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmluZFBvc3RzKGRiLCBiZWZvcmUsIGJ5LCBsaW1pdCA9IDEwKSB7XHJcbiAgcmV0dXJuIGRiXHJcbiAgICAuY29sbGVjdGlvbigncG9zdHMnKVxyXG4gICAgLmFnZ3JlZ2F0ZShbXHJcbiAgICAgIHtcclxuICAgICAgICAkbWF0Y2g6IHtcclxuICAgICAgICAgIC4uLihieSAmJiB7IGNyZWF0b3JJZDogbmV3IE9iamVjdElkKGJ5KSB9KSxcclxuICAgICAgICAgIC4uLihiZWZvcmUgJiYgeyBjcmVhdGVkQXQ6IHsgJGx0OiBiZWZvcmUgfSB9KSxcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICB7ICRzb3J0OiB7IF9pZDogLTEgfSB9LFxyXG4gICAgICB7ICRsaW1pdDogbGltaXQgfSxcclxuICAgICAge1xyXG4gICAgICAgICRsb29rdXA6IHtcclxuICAgICAgICAgIGZyb206ICd1c2VycycsXHJcbiAgICAgICAgICBsb2NhbEZpZWxkOiAnY3JlYXRvcklkJyxcclxuICAgICAgICAgIGZvcmVpZ25GaWVsZDogJ19pZCcsXHJcbiAgICAgICAgICBhczogJ2NyZWF0b3InLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICAgIHsgJHVud2luZDogJyRjcmVhdG9yJyB9LFxyXG4gICAgICB7ICRwcm9qZWN0OiBkYlByb2plY3Rpb25Vc2VycygnY3JlYXRvci4nKSB9LFxyXG4gICAgXSlcclxuICAgIC50b0FycmF5KCk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbnNlcnRQb3N0KGRiLCB7IGNvbnRlbnQsIGNyZWF0b3JJZCwgaW1hZ2UgfSkge1xyXG4gIGNvbnN0IHBvc3QgPSB7XHJcbiAgICBjb250ZW50LFxyXG4gICAgY3JlYXRvcklkLFxyXG4gICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgLi4uKGltYWdlICYmIHsgaW1hZ2UgfSksXHJcbiAgfTtcclxuICBjb25zdCB7IGluc2VydGVkSWQgfSA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oJ3Bvc3RzJykuaW5zZXJ0T25lKHBvc3QpO1xyXG4gIHBvc3QuX2lkID0gaW5zZXJ0ZWRJZDtcclxuICByZXR1cm4gcG9zdDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVBvc3RCeUlkKGRiLCBpZCkge1xyXG4gIHJldHVybiBkYlxyXG4gICAgLmNvbGxlY3Rpb24oJ3Bvc3RzJylcclxuICAgIC5kZWxldGVPbmUoeyBfaWQ6IG5ldyBPYmplY3RJZChpZCkgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZW1vdmVQb3N0KGRiLCBpZCkge1xyXG4gIC8vIERlbGV0ZSB0aGUgcG9zdFxyXG4gIGF3YWl0IGRiLmNvbGxlY3Rpb24oJ3Bvc3RzJykuZGVsZXRlT25lKHsgX2lkOiBuZXcgT2JqZWN0SWQoaWQpIH0pO1xyXG4gIC8vIERlbGV0ZSBhbGwgY29tbWVudHMgZm9yIHRoaXMgcG9zdFxyXG4gIGF3YWl0IGRiLmNvbGxlY3Rpb24oJ2NvbW1lbnRzJykuZGVsZXRlTWFueSh7IHBvc3RJZDogbmV3IE9iamVjdElkKGlkKSB9KTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZpbmRBbGxQb3N0c0ZvckFkbWluKGRiLCBsaW1pdCA9IDUwKSB7XHJcbiAgcmV0dXJuIGRiXHJcbiAgICAuY29sbGVjdGlvbigncG9zdHMnKVxyXG4gICAgLmFnZ3JlZ2F0ZShbXHJcbiAgICAgIHsgJHNvcnQ6IHsgX2lkOiAtMSB9IH0sXHJcbiAgICAgIHsgJGxpbWl0OiBsaW1pdCB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgJGxvb2t1cDoge1xyXG4gICAgICAgICAgZnJvbTogJ3VzZXJzJyxcclxuICAgICAgICAgIGxvY2FsRmllbGQ6ICdjcmVhdG9ySWQnLFxyXG4gICAgICAgICAgZm9yZWlnbkZpZWxkOiAnX2lkJyxcclxuICAgICAgICAgIGFzOiAnY3JlYXRvcicsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgICAgeyAkdW53aW5kOiAnJGNyZWF0b3InIH0sXHJcbiAgICAgIHsgJHByb2plY3Q6IGRiUHJvamVjdGlvblVzZXJzKCdjcmVhdG9yLicpIH0sXHJcbiAgICBdKVxyXG4gICAgLnRvQXJyYXkoKTtcclxufVxyXG4iXSwibmFtZXMiOlsiT2JqZWN0SWQiLCJkYlByb2plY3Rpb25Vc2VycyIsImZpbmRQb3N0QnlJZCIsImRiIiwiaWQiLCJwb3N0cyIsImNvbGxlY3Rpb24iLCJhZ2dyZWdhdGUiLCIkbWF0Y2giLCJfaWQiLCIkbGltaXQiLCIkbG9va3VwIiwiZnJvbSIsImxvY2FsRmllbGQiLCJmb3JlaWduRmllbGQiLCJhcyIsIiR1bndpbmQiLCIkcHJvamVjdCIsInRvQXJyYXkiLCJmaW5kUG9zdHMiLCJiZWZvcmUiLCJieSIsImxpbWl0IiwiY3JlYXRvcklkIiwiY3JlYXRlZEF0IiwiJGx0IiwiJHNvcnQiLCJpbnNlcnRQb3N0IiwiY29udGVudCIsImltYWdlIiwicG9zdCIsIkRhdGUiLCJpbnNlcnRlZElkIiwiaW5zZXJ0T25lIiwiZGVsZXRlUG9zdEJ5SWQiLCJkZWxldGVPbmUiLCJyZW1vdmVQb3N0IiwiZGVsZXRlTWFueSIsInBvc3RJZCIsImZpbmRBbGxQb3N0c0ZvckFkbWluIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./api-lib/db/post.js\n");

/***/ }),

/***/ "(api)/./api-lib/db/token.js":
/*!*****************************!*\
  !*** ./api-lib/db/token.js ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createToken\": () => (/* binding */ createToken),\n/* harmony export */   \"findAndDeleteTokenByIdAndType\": () => (/* binding */ findAndDeleteTokenByIdAndType),\n/* harmony export */   \"findTokenByIdAndType\": () => (/* binding */ findTokenByIdAndType)\n/* harmony export */ });\n/* harmony import */ var nanoid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nanoid */ \"nanoid\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([nanoid__WEBPACK_IMPORTED_MODULE_0__]);\nnanoid__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nfunction findTokenByIdAndType(db, id, type) {\n    return db.collection(\"tokens\").findOne({\n        _id: id,\n        type\n    });\n}\nfunction findAndDeleteTokenByIdAndType(db, id, type) {\n    return db.collection(\"tokens\").findOneAndDelete({\n        _id: id,\n        type\n    }).then(({ value  })=>value);\n}\nasync function createToken(db, { creatorId , type , expireAt  }) {\n    const securedTokenId = (0,nanoid__WEBPACK_IMPORTED_MODULE_0__.nanoid)(32);\n    const token = {\n        _id: securedTokenId,\n        creatorId,\n        type,\n        expireAt\n    };\n    await db.collection(\"tokens\").insertOne(token);\n    return token;\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9hcGktbGliL2RiL3Rva2VuLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBZ0M7QUFFekIsU0FBU0Msb0JBQW9CLENBQUNDLEVBQUUsRUFBRUMsRUFBRSxFQUFFQyxJQUFJLEVBQUU7SUFDakQsT0FBT0YsRUFBRSxDQUFDRyxVQUFVLENBQUMsUUFBUSxDQUFDLENBQUNDLE9BQU8sQ0FBQztRQUNyQ0MsR0FBRyxFQUFFSixFQUFFO1FBQ1BDLElBQUk7S0FDTCxDQUFDLENBQUM7QUFDTCxDQUFDO0FBRU0sU0FBU0ksNkJBQTZCLENBQUNOLEVBQUUsRUFBRUMsRUFBRSxFQUFFQyxJQUFJLEVBQUU7SUFDMUQsT0FBT0YsRUFBRSxDQUNORyxVQUFVLENBQUMsUUFBUSxDQUFDLENBQ3BCSSxnQkFBZ0IsQ0FBQztRQUFFRixHQUFHLEVBQUVKLEVBQUU7UUFBRUMsSUFBSTtLQUFFLENBQUMsQ0FDbkNNLElBQUksQ0FBQyxDQUFDLEVBQUVDLEtBQUssR0FBRSxHQUFLQSxLQUFLLENBQUMsQ0FBQztBQUNoQyxDQUFDO0FBRU0sZUFBZUMsV0FBVyxDQUFDVixFQUFFLEVBQUUsRUFBRVcsU0FBUyxHQUFFVCxJQUFJLEdBQUVVLFFBQVEsR0FBRSxFQUFFO0lBQ25FLE1BQU1DLGNBQWMsR0FBR2YsOENBQU0sQ0FBQyxFQUFFLENBQUM7SUFDakMsTUFBTWdCLEtBQUssR0FBRztRQUNaVCxHQUFHLEVBQUVRLGNBQWM7UUFDbkJGLFNBQVM7UUFDVFQsSUFBSTtRQUNKVSxRQUFRO0tBQ1Q7SUFDRCxNQUFNWixFQUFFLENBQUNHLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQ1ksU0FBUyxDQUFDRCxLQUFLLENBQUMsQ0FBQztJQUMvQyxPQUFPQSxLQUFLLENBQUM7QUFDZixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLW1vbmdvZGItYXBwLy4vYXBpLWxpYi9kYi90b2tlbi5qcz85N2Q0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG5hbm9pZCB9IGZyb20gJ25hbm9pZCc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZmluZFRva2VuQnlJZEFuZFR5cGUoZGIsIGlkLCB0eXBlKSB7XHJcbiAgcmV0dXJuIGRiLmNvbGxlY3Rpb24oJ3Rva2VucycpLmZpbmRPbmUoe1xyXG4gICAgX2lkOiBpZCxcclxuICAgIHR5cGUsXHJcbiAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBmaW5kQW5kRGVsZXRlVG9rZW5CeUlkQW5kVHlwZShkYiwgaWQsIHR5cGUpIHtcclxuICByZXR1cm4gZGJcclxuICAgIC5jb2xsZWN0aW9uKCd0b2tlbnMnKVxyXG4gICAgLmZpbmRPbmVBbmREZWxldGUoeyBfaWQ6IGlkLCB0eXBlIH0pXHJcbiAgICAudGhlbigoeyB2YWx1ZSB9KSA9PiB2YWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVUb2tlbihkYiwgeyBjcmVhdG9ySWQsIHR5cGUsIGV4cGlyZUF0IH0pIHtcclxuICBjb25zdCBzZWN1cmVkVG9rZW5JZCA9IG5hbm9pZCgzMik7XHJcbiAgY29uc3QgdG9rZW4gPSB7XHJcbiAgICBfaWQ6IHNlY3VyZWRUb2tlbklkLFxyXG4gICAgY3JlYXRvcklkLFxyXG4gICAgdHlwZSxcclxuICAgIGV4cGlyZUF0LFxyXG4gIH07XHJcbiAgYXdhaXQgZGIuY29sbGVjdGlvbigndG9rZW5zJykuaW5zZXJ0T25lKHRva2VuKTtcclxuICByZXR1cm4gdG9rZW47XHJcbn1cclxuIl0sIm5hbWVzIjpbIm5hbm9pZCIsImZpbmRUb2tlbkJ5SWRBbmRUeXBlIiwiZGIiLCJpZCIsInR5cGUiLCJjb2xsZWN0aW9uIiwiZmluZE9uZSIsIl9pZCIsImZpbmRBbmREZWxldGVUb2tlbkJ5SWRBbmRUeXBlIiwiZmluZE9uZUFuZERlbGV0ZSIsInRoZW4iLCJ2YWx1ZSIsImNyZWF0ZVRva2VuIiwiY3JlYXRvcklkIiwiZXhwaXJlQXQiLCJzZWN1cmVkVG9rZW5JZCIsInRva2VuIiwiaW5zZXJ0T25lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./api-lib/db/token.js\n");

/***/ }),

/***/ "(api)/./api-lib/db/user.js":
/*!****************************!*\
  !*** ./api-lib/db/user.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"UNSAFE_updateUserPassword\": () => (/* binding */ UNSAFE_updateUserPassword),\n/* harmony export */   \"dbProjectionUsers\": () => (/* binding */ dbProjectionUsers),\n/* harmony export */   \"findUserByEmail\": () => (/* binding */ findUserByEmail),\n/* harmony export */   \"findUserById\": () => (/* binding */ findUserById),\n/* harmony export */   \"findUserByUsername\": () => (/* binding */ findUserByUsername),\n/* harmony export */   \"findUserForAuth\": () => (/* binding */ findUserForAuth),\n/* harmony export */   \"findUserWithEmailAndPassword\": () => (/* binding */ findUserWithEmailAndPassword),\n/* harmony export */   \"insertUser\": () => (/* binding */ insertUser),\n/* harmony export */   \"updateUserById\": () => (/* binding */ updateUserById),\n/* harmony export */   \"updateUserPasswordByOldPassword\": () => (/* binding */ updateUserPasswordByOldPassword)\n/* harmony export */ });\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bcryptjs */ \"bcryptjs\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var validator_lib_normalizeEmail__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! validator/lib/normalizeEmail */ \"validator/lib/normalizeEmail\");\n/* harmony import */ var validator_lib_normalizeEmail__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(validator_lib_normalizeEmail__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nasync function findUserWithEmailAndPassword(db, email, password) {\n    email = validator_lib_normalizeEmail__WEBPACK_IMPORTED_MODULE_2___default()(email);\n    const user = await db.collection(\"users\").findOne({\n        email\n    });\n    if (user && await bcryptjs__WEBPACK_IMPORTED_MODULE_0___default().compare(password, user.password)) {\n        return {\n            ...user,\n            password: undefined\n        }; // filtered out password\n    }\n    return null;\n}\nasync function findUserForAuth(db, userId) {\n    return db.collection(\"users\").findOne({\n        _id: new mongodb__WEBPACK_IMPORTED_MODULE_1__.ObjectId(userId)\n    }, {\n        projection: {\n            password: 0\n        }\n    }).then((user)=>user || null);\n}\nasync function findUserById(db, userId) {\n    return db.collection(\"users\").findOne({\n        _id: new mongodb__WEBPACK_IMPORTED_MODULE_1__.ObjectId(userId)\n    }, {\n        projection: dbProjectionUsers()\n    }).then((user)=>user || null);\n}\nasync function findUserByUsername(db, username) {\n    return db.collection(\"users\").findOne({\n        username\n    }, {\n        projection: dbProjectionUsers()\n    }).then((user)=>user || null);\n}\nasync function findUserByEmail(db, email) {\n    email = validator_lib_normalizeEmail__WEBPACK_IMPORTED_MODULE_2___default()(email);\n    return db.collection(\"users\").findOne({\n        email\n    }, {\n        projection: dbProjectionUsers()\n    }).then((user)=>user || null);\n}\nasync function updateUserById(db, id, data) {\n    return db.collection(\"users\").findOneAndUpdate({\n        _id: new mongodb__WEBPACK_IMPORTED_MODULE_1__.ObjectId(id)\n    }, {\n        $set: data\n    }, {\n        returnDocument: \"after\",\n        projection: {\n            password: 0\n        }\n    }).then(({ value  })=>value);\n}\nasync function insertUser(db, { email , originalPassword , bio =\"\" , name , profilePicture , username , secretWord  }) {\n    const user = {\n        emailVerified: false,\n        profilePicture,\n        email,\n        name,\n        username,\n        bio,\n        role: \"user\",\n        secretWord: secretWord || \"\"\n    };\n    const password = await bcryptjs__WEBPACK_IMPORTED_MODULE_0___default().hash(originalPassword, 10);\n    const { insertedId  } = await db.collection(\"users\").insertOne({\n        ...user,\n        password\n    });\n    user._id = insertedId;\n    return user;\n}\nasync function updateUserPasswordByOldPassword(db, id, oldPassword, newPassword) {\n    const user = await db.collection(\"users\").findOne(new mongodb__WEBPACK_IMPORTED_MODULE_1__.ObjectId(id));\n    if (!user) return false;\n    const matched = await bcryptjs__WEBPACK_IMPORTED_MODULE_0___default().compare(oldPassword, user.password);\n    if (!matched) return false;\n    const password = await bcryptjs__WEBPACK_IMPORTED_MODULE_0___default().hash(newPassword, 10);\n    await db.collection(\"users\").updateOne({\n        _id: new mongodb__WEBPACK_IMPORTED_MODULE_1__.ObjectId(id)\n    }, {\n        $set: {\n            password\n        }\n    });\n    return true;\n}\nasync function UNSAFE_updateUserPassword(db, id, newPassword) {\n    const password = await bcryptjs__WEBPACK_IMPORTED_MODULE_0___default().hash(newPassword, 10);\n    await db.collection(\"users\").updateOne({\n        _id: new mongodb__WEBPACK_IMPORTED_MODULE_1__.ObjectId(id)\n    }, {\n        $set: {\n            password\n        }\n    });\n}\nfunction dbProjectionUsers(prefix = \"\") {\n    return {\n        [`${prefix}password`]: 0,\n        [`${prefix}email`]: 0,\n        [`${prefix}emailVerified`]: 0\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMtbW9uZ29kYi1hcHAvLi9hcGktbGliL2RiL3VzZXIuanM/YWI4ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYmNyeXB0IGZyb20gJ2JjcnlwdGpzJztcclxuaW1wb3J0IHsgT2JqZWN0SWQgfSBmcm9tICdtb25nb2RiJztcclxuaW1wb3J0IG5vcm1hbGl6ZUVtYWlsIGZyb20gJ3ZhbGlkYXRvci9saWIvbm9ybWFsaXplRW1haWwnO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZpbmRVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQoZGIsIGVtYWlsLCBwYXNzd29yZCkge1xyXG4gIGVtYWlsID0gbm9ybWFsaXplRW1haWwoZW1haWwpO1xyXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKCd1c2VycycpLmZpbmRPbmUoeyBlbWFpbCB9KTtcclxuICBpZiAodXNlciAmJiAoYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIHVzZXIucGFzc3dvcmQpKSkge1xyXG4gICAgcmV0dXJuIHsgLi4udXNlciwgcGFzc3dvcmQ6IHVuZGVmaW5lZCB9OyAvLyBmaWx0ZXJlZCBvdXQgcGFzc3dvcmRcclxuICB9XHJcbiAgcmV0dXJuIG51bGw7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmaW5kVXNlckZvckF1dGgoZGIsIHVzZXJJZCkge1xyXG4gIHJldHVybiBkYlxyXG4gICAgLmNvbGxlY3Rpb24oJ3VzZXJzJylcclxuICAgIC5maW5kT25lKHsgX2lkOiBuZXcgT2JqZWN0SWQodXNlcklkKSB9LCB7IHByb2plY3Rpb246IHsgcGFzc3dvcmQ6IDAgfSB9KVxyXG4gICAgLnRoZW4oKHVzZXIpID0+IHVzZXIgfHwgbnVsbCk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmaW5kVXNlckJ5SWQoZGIsIHVzZXJJZCkge1xyXG4gIHJldHVybiBkYlxyXG4gICAgLmNvbGxlY3Rpb24oJ3VzZXJzJylcclxuICAgIC5maW5kT25lKHsgX2lkOiBuZXcgT2JqZWN0SWQodXNlcklkKSB9LCB7IHByb2plY3Rpb246IGRiUHJvamVjdGlvblVzZXJzKCkgfSlcclxuICAgIC50aGVuKCh1c2VyKSA9PiB1c2VyIHx8IG51bGwpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmluZFVzZXJCeVVzZXJuYW1lKGRiLCB1c2VybmFtZSkge1xyXG4gIHJldHVybiBkYlxyXG4gICAgLmNvbGxlY3Rpb24oJ3VzZXJzJylcclxuICAgIC5maW5kT25lKHsgdXNlcm5hbWUgfSwgeyBwcm9qZWN0aW9uOiBkYlByb2plY3Rpb25Vc2VycygpIH0pXHJcbiAgICAudGhlbigodXNlcikgPT4gdXNlciB8fCBudWxsKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZpbmRVc2VyQnlFbWFpbChkYiwgZW1haWwpIHtcclxuICBlbWFpbCA9IG5vcm1hbGl6ZUVtYWlsKGVtYWlsKTtcclxuICByZXR1cm4gZGJcclxuICAgIC5jb2xsZWN0aW9uKCd1c2VycycpXHJcbiAgICAuZmluZE9uZSh7IGVtYWlsIH0sIHsgcHJvamVjdGlvbjogZGJQcm9qZWN0aW9uVXNlcnMoKSB9KVxyXG4gICAgLnRoZW4oKHVzZXIpID0+IHVzZXIgfHwgbnVsbCk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVVc2VyQnlJZChkYiwgaWQsIGRhdGEpIHtcclxuICByZXR1cm4gZGJcclxuICAgIC5jb2xsZWN0aW9uKCd1c2VycycpXHJcbiAgICAuZmluZE9uZUFuZFVwZGF0ZShcclxuICAgICAgeyBfaWQ6IG5ldyBPYmplY3RJZChpZCkgfSxcclxuICAgICAgeyAkc2V0OiBkYXRhIH0sXHJcbiAgICAgIHsgcmV0dXJuRG9jdW1lbnQ6ICdhZnRlcicsIHByb2plY3Rpb246IHsgcGFzc3dvcmQ6IDAgfSB9XHJcbiAgICApXHJcbiAgICAudGhlbigoeyB2YWx1ZSB9KSA9PiB2YWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbnNlcnRVc2VyKFxyXG4gIGRiLFxyXG4gIHsgZW1haWwsIG9yaWdpbmFsUGFzc3dvcmQsIGJpbyA9ICcnLCBuYW1lLCBwcm9maWxlUGljdHVyZSwgdXNlcm5hbWUsIHNlY3JldFdvcmQgfVxyXG4pIHtcclxuICBjb25zdCB1c2VyID0ge1xyXG4gICAgZW1haWxWZXJpZmllZDogZmFsc2UsXHJcbiAgICBwcm9maWxlUGljdHVyZSxcclxuICAgIGVtYWlsLFxyXG4gICAgbmFtZSxcclxuICAgIHVzZXJuYW1lLFxyXG4gICAgYmlvLFxyXG4gICAgcm9sZTogJ3VzZXInLFxyXG4gICAgc2VjcmV0V29yZDogc2VjcmV0V29yZCB8fCAnJywgLy8g0JfQsdC10YDRltCz0LDRlNC80L4g0YHQtdC60YDQtdGC0L3QtSDRgdC70L7QstC+XHJcbiAgfTtcclxuICBjb25zdCBwYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKG9yaWdpbmFsUGFzc3dvcmQsIDEwKTtcclxuICBjb25zdCB7IGluc2VydGVkSWQgfSA9IGF3YWl0IGRiXHJcbiAgICAuY29sbGVjdGlvbigndXNlcnMnKVxyXG4gICAgLmluc2VydE9uZSh7IC4uLnVzZXIsIHBhc3N3b3JkIH0pO1xyXG4gIHVzZXIuX2lkID0gaW5zZXJ0ZWRJZDtcclxuICByZXR1cm4gdXNlcjtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVVzZXJQYXNzd29yZEJ5T2xkUGFzc3dvcmQoXHJcbiAgZGIsXHJcbiAgaWQsXHJcbiAgb2xkUGFzc3dvcmQsXHJcbiAgbmV3UGFzc3dvcmRcclxuKSB7XHJcbiAgY29uc3QgdXNlciA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oJ3VzZXJzJykuZmluZE9uZShuZXcgT2JqZWN0SWQoaWQpKTtcclxuICBpZiAoIXVzZXIpIHJldHVybiBmYWxzZTtcclxuICBjb25zdCBtYXRjaGVkID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUob2xkUGFzc3dvcmQsIHVzZXIucGFzc3dvcmQpO1xyXG4gIGlmICghbWF0Y2hlZCkgcmV0dXJuIGZhbHNlO1xyXG4gIGNvbnN0IHBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2gobmV3UGFzc3dvcmQsIDEwKTtcclxuICBhd2FpdCBkYlxyXG4gICAgLmNvbGxlY3Rpb24oJ3VzZXJzJylcclxuICAgIC51cGRhdGVPbmUoeyBfaWQ6IG5ldyBPYmplY3RJZChpZCkgfSwgeyAkc2V0OiB7IHBhc3N3b3JkIH0gfSk7XHJcbiAgcmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBVTlNBRkVfdXBkYXRlVXNlclBhc3N3b3JkKGRiLCBpZCwgbmV3UGFzc3dvcmQpIHtcclxuICBjb25zdCBwYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKG5ld1Bhc3N3b3JkLCAxMCk7XHJcbiAgYXdhaXQgZGJcclxuICAgIC5jb2xsZWN0aW9uKCd1c2VycycpXHJcbiAgICAudXBkYXRlT25lKHsgX2lkOiBuZXcgT2JqZWN0SWQoaWQpIH0sIHsgJHNldDogeyBwYXNzd29yZCB9IH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZGJQcm9qZWN0aW9uVXNlcnMocHJlZml4ID0gJycpIHtcclxuICByZXR1cm4ge1xyXG4gICAgW2Ake3ByZWZpeH1wYXNzd29yZGBdOiAwLFxyXG4gICAgW2Ake3ByZWZpeH1lbWFpbGBdOiAwLFxyXG4gICAgW2Ake3ByZWZpeH1lbWFpbFZlcmlmaWVkYF06IDAsXHJcbiAgfTtcclxufVxyXG4iXSwibmFtZXMiOlsiYmNyeXB0IiwiT2JqZWN0SWQiLCJub3JtYWxpemVFbWFpbCIsImZpbmRVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQiLCJkYiIsImVtYWlsIiwicGFzc3dvcmQiLCJ1c2VyIiwiY29sbGVjdGlvbiIsImZpbmRPbmUiLCJjb21wYXJlIiwidW5kZWZpbmVkIiwiZmluZFVzZXJGb3JBdXRoIiwidXNlcklkIiwiX2lkIiwicHJvamVjdGlvbiIsInRoZW4iLCJmaW5kVXNlckJ5SWQiLCJkYlByb2plY3Rpb25Vc2VycyIsImZpbmRVc2VyQnlVc2VybmFtZSIsInVzZXJuYW1lIiwiZmluZFVzZXJCeUVtYWlsIiwidXBkYXRlVXNlckJ5SWQiLCJpZCIsImRhdGEiLCJmaW5kT25lQW5kVXBkYXRlIiwiJHNldCIsInJldHVybkRvY3VtZW50IiwidmFsdWUiLCJpbnNlcnRVc2VyIiwib3JpZ2luYWxQYXNzd29yZCIsImJpbyIsIm5hbWUiLCJwcm9maWxlUGljdHVyZSIsInNlY3JldFdvcmQiLCJlbWFpbFZlcmlmaWVkIiwicm9sZSIsImhhc2giLCJpbnNlcnRlZElkIiwiaW5zZXJ0T25lIiwidXBkYXRlVXNlclBhc3N3b3JkQnlPbGRQYXNzd29yZCIsIm9sZFBhc3N3b3JkIiwibmV3UGFzc3dvcmQiLCJtYXRjaGVkIiwidXBkYXRlT25lIiwiVU5TQUZFX3VwZGF0ZVVzZXJQYXNzd29yZCIsInByZWZpeCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./api-lib/db/user.js\n");

/***/ }),

/***/ "(api)/./api-lib/middlewares/ajv.js":
/*!************************************!*\
  !*** ./api-lib/middlewares/ajv.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"validateBody\": () => (/* binding */ validateBody)\n/* harmony export */ });\n/* harmony import */ var ajv__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ajv */ \"ajv\");\n/* harmony import */ var ajv__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(ajv__WEBPACK_IMPORTED_MODULE_0__);\n\nfunction validateBody(schema) {\n    const ajv = new (ajv__WEBPACK_IMPORTED_MODULE_0___default())();\n    const validate = ajv.compile(schema);\n    return (req, res, next)=>{\n        const valid = validate(req.body);\n        if (valid) {\n            return next();\n        } else {\n            const error = validate.errors[0];\n            return res.status(400).json({\n                error: {\n                    message: `\"${error.instancePath.substring(1)}\" ${error.message}`\n                }\n            });\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9hcGktbGliL21pZGRsZXdhcmVzL2Fqdi5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBc0I7QUFFZixTQUFTQyxZQUFZLENBQUNDLE1BQU0sRUFBRTtJQUNuQyxNQUFNQyxHQUFHLEdBQUcsSUFBSUgsNENBQUcsRUFBRTtJQUNyQixNQUFNSSxRQUFRLEdBQUdELEdBQUcsQ0FBQ0UsT0FBTyxDQUFDSCxNQUFNLENBQUM7SUFDcEMsT0FBTyxDQUFDSSxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxHQUFLO1FBQ3pCLE1BQU1DLEtBQUssR0FBR0wsUUFBUSxDQUFDRSxHQUFHLENBQUNJLElBQUksQ0FBQztRQUNoQyxJQUFJRCxLQUFLLEVBQUU7WUFDVCxPQUFPRCxJQUFJLEVBQUUsQ0FBQztRQUNoQixPQUFPO1lBQ0wsTUFBTUcsS0FBSyxHQUFHUCxRQUFRLENBQUNRLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDaEMsT0FBT0wsR0FBRyxDQUFDTSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztnQkFDMUJILEtBQUssRUFBRTtvQkFDTEksT0FBTyxFQUFFLENBQUMsQ0FBQyxFQUFFSixLQUFLLENBQUNLLFlBQVksQ0FBQ0MsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRU4sS0FBSyxDQUFDSSxPQUFPLENBQUMsQ0FBQztpQkFDakU7YUFDRixDQUFDLENBQUM7UUFDTCxDQUFDO0lBQ0gsQ0FBQyxDQUFDO0FBQ0osQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy1tb25nb2RiLWFwcC8uL2FwaS1saWIvbWlkZGxld2FyZXMvYWp2LmpzPzMxZWQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEFqdiBmcm9tICdhanYnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlQm9keShzY2hlbWEpIHtcclxuICBjb25zdCBhanYgPSBuZXcgQWp2KCk7XHJcbiAgY29uc3QgdmFsaWRhdGUgPSBhanYuY29tcGlsZShzY2hlbWEpO1xyXG4gIHJldHVybiAocmVxLCByZXMsIG5leHQpID0+IHtcclxuICAgIGNvbnN0IHZhbGlkID0gdmFsaWRhdGUocmVxLmJvZHkpO1xyXG4gICAgaWYgKHZhbGlkKSB7XHJcbiAgICAgIHJldHVybiBuZXh0KCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBlcnJvciA9IHZhbGlkYXRlLmVycm9yc1swXTtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcclxuICAgICAgICBlcnJvcjoge1xyXG4gICAgICAgICAgbWVzc2FnZTogYFwiJHtlcnJvci5pbnN0YW5jZVBhdGguc3Vic3RyaW5nKDEpfVwiICR7ZXJyb3IubWVzc2FnZX1gLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH07XHJcbn1cclxuIl0sIm5hbWVzIjpbIkFqdiIsInZhbGlkYXRlQm9keSIsInNjaGVtYSIsImFqdiIsInZhbGlkYXRlIiwiY29tcGlsZSIsInJlcSIsInJlcyIsIm5leHQiLCJ2YWxpZCIsImJvZHkiLCJlcnJvciIsImVycm9ycyIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwiaW5zdGFuY2VQYXRoIiwic3Vic3RyaW5nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./api-lib/middlewares/ajv.js\n");

/***/ }),

/***/ "(api)/./api-lib/middlewares/auth.js":
/*!*************************************!*\
  !*** ./api-lib/middlewares/auth.js ***!
  \*************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _api_lib_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/api-lib/auth */ \"(api)/./api-lib/auth/index.js\");\n/* harmony import */ var _session__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./session */ \"(api)/./api-lib/middlewares/session.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_api_lib_auth__WEBPACK_IMPORTED_MODULE_0__, _session__WEBPACK_IMPORTED_MODULE_1__]);\n([_api_lib_auth__WEBPACK_IMPORTED_MODULE_0__, _session__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\nconst auths = [\n    _session__WEBPACK_IMPORTED_MODULE_1__[\"default\"],\n    _api_lib_auth__WEBPACK_IMPORTED_MODULE_0__.passport.initialize(),\n    _api_lib_auth__WEBPACK_IMPORTED_MODULE_0__.passport.session()\n];\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (auths);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9hcGktbGliL21pZGRsZXdhcmVzL2F1dGguanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQTBDO0FBQ1Y7QUFFaEMsTUFBTUUsS0FBSyxHQUFHO0lBQUNELGdEQUFPO0lBQUVELDhEQUFtQixFQUFFO0lBQUVBLDJEQUFnQixFQUFFO0NBQUM7QUFFbEUsaUVBQWVFLEtBQUssRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy1tb25nb2RiLWFwcC8uL2FwaS1saWIvbWlkZGxld2FyZXMvYXV0aC5qcz8zMTQzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHBhc3Nwb3J0IH0gZnJvbSAnQC9hcGktbGliL2F1dGgnO1xyXG5pbXBvcnQgc2Vzc2lvbiBmcm9tICcuL3Nlc3Npb24nO1xyXG5cclxuY29uc3QgYXV0aHMgPSBbc2Vzc2lvbiwgcGFzc3BvcnQuaW5pdGlhbGl6ZSgpLCBwYXNzcG9ydC5zZXNzaW9uKCldO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXV0aHM7XHJcbiJdLCJuYW1lcyI6WyJwYXNzcG9ydCIsInNlc3Npb24iLCJhdXRocyIsImluaXRpYWxpemUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./api-lib/middlewares/auth.js\n");

/***/ }),

/***/ "(api)/./api-lib/middlewares/index.js":
/*!**************************************!*\
  !*** ./api-lib/middlewares/index.js ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"auths\": () => (/* reexport safe */ _auth__WEBPACK_IMPORTED_MODULE_1__[\"default\"]),\n/* harmony export */   \"validateBody\": () => (/* reexport safe */ _ajv__WEBPACK_IMPORTED_MODULE_0__.validateBody)\n/* harmony export */ });\n/* harmony import */ var _ajv__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ajv */ \"(api)/./api-lib/middlewares/ajv.js\");\n/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./auth */ \"(api)/./api-lib/middlewares/auth.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_auth__WEBPACK_IMPORTED_MODULE_1__]);\n_auth__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9hcGktbGliL21pZGRsZXdhcmVzL2luZGV4LmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBcUM7QUFDSyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy1tb25nb2RiLWFwcC8uL2FwaS1saWIvbWlkZGxld2FyZXMvaW5kZXguanM/NGY0MSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgeyB2YWxpZGF0ZUJvZHkgfSBmcm9tICcuL2Fqdic7XHJcbmV4cG9ydCB7IGRlZmF1bHQgYXMgYXV0aHMgfSBmcm9tICcuL2F1dGgnO1xyXG4iXSwibmFtZXMiOlsidmFsaWRhdGVCb2R5IiwiZGVmYXVsdCIsImF1dGhzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./api-lib/middlewares/index.js\n");

/***/ }),

/***/ "(api)/./api-lib/middlewares/session.js":
/*!****************************************!*\
  !*** ./api-lib/middlewares/session.js ***!
  \****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ session)\n/* harmony export */ });\n/* harmony import */ var _api_lib_mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/api-lib/mongodb */ \"(api)/./api-lib/mongodb.js\");\n/* harmony import */ var connect_mongo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! connect-mongo */ \"connect-mongo\");\n/* harmony import */ var connect_mongo__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(connect_mongo__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_session__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-session */ \"next-session\");\n/* harmony import */ var next_session_lib_compat__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next-session/lib/compat */ \"next-session/lib/compat\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([next_session__WEBPACK_IMPORTED_MODULE_2__, next_session_lib_compat__WEBPACK_IMPORTED_MODULE_3__]);\n([next_session__WEBPACK_IMPORTED_MODULE_2__, next_session_lib_compat__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\nconst mongoStore = connect_mongo__WEBPACK_IMPORTED_MODULE_1___default().create({\n    clientPromise: (0,_api_lib_mongodb__WEBPACK_IMPORTED_MODULE_0__.getMongoClient)(),\n    stringify: false\n});\nconst getSession = (0,next_session__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\n    store: (0,next_session_lib_compat__WEBPACK_IMPORTED_MODULE_3__.promisifyStore)(mongoStore),\n    cookie: {\n        httpOnly: true,\n        secure: \"development\" === \"production\",\n        maxAge: 2 * 7 * 24 * 60 * 60,\n        path: \"/\",\n        sameSite: \"strict\"\n    },\n    touchAfter: 1 * 7 * 24 * 60 * 60\n});\nasync function session(req, res, next) {\n    await getSession(req, res);\n    next();\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9hcGktbGliL21pZGRsZXdhcmVzL3Nlc3Npb24uanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQW1EO0FBQ1o7QUFDQTtBQUNrQjtBQUV6RCxNQUFNSSxVQUFVLEdBQUdILDJEQUFpQixDQUFDO0lBQ25DSyxhQUFhLEVBQUVOLGdFQUFjLEVBQUU7SUFDL0JPLFNBQVMsRUFBRSxLQUFLO0NBQ2pCLENBQUM7QUFFRixNQUFNQyxVQUFVLEdBQUdOLHdEQUFXLENBQUM7SUFDN0JPLEtBQUssRUFBRU4sdUVBQWMsQ0FBQ0MsVUFBVSxDQUFDO0lBQ2pDTSxNQUFNLEVBQUU7UUFDTkMsUUFBUSxFQUFFLElBQUk7UUFDZEMsTUFBTSxFQUFFQyxhQWRDLEtBY3dCLFlBQVk7UUFDN0NDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRTtRQUM1QkMsSUFBSSxFQUFFLEdBQUc7UUFDVEMsUUFBUSxFQUFFLFFBQVE7S0FDbkI7SUFDREMsVUFBVSxFQUFFLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFO0NBQ2pDLENBQUM7QUFFYSxlQUFlQyxPQUFPLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEVBQUU7SUFDcEQsTUFBTWIsVUFBVSxDQUFDVyxHQUFHLEVBQUVDLEdBQUcsQ0FBQyxDQUFDO0lBQzNCQyxJQUFJLEVBQUUsQ0FBQztBQUNULENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMtbW9uZ29kYi1hcHAvLi9hcGktbGliL21pZGRsZXdhcmVzL3Nlc3Npb24uanM/MGMwMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRNb25nb0NsaWVudCB9IGZyb20gJ0AvYXBpLWxpYi9tb25nb2RiJztcclxuaW1wb3J0IE1vbmdvU3RvcmUgZnJvbSAnY29ubmVjdC1tb25nbyc7XHJcbmltcG9ydCBuZXh0U2Vzc2lvbiBmcm9tICduZXh0LXNlc3Npb24nO1xyXG5pbXBvcnQgeyBwcm9taXNpZnlTdG9yZSB9IGZyb20gJ25leHQtc2Vzc2lvbi9saWIvY29tcGF0JztcclxuXHJcbmNvbnN0IG1vbmdvU3RvcmUgPSBNb25nb1N0b3JlLmNyZWF0ZSh7XHJcbiAgY2xpZW50UHJvbWlzZTogZ2V0TW9uZ29DbGllbnQoKSxcclxuICBzdHJpbmdpZnk6IGZhbHNlLFxyXG59KTtcclxuXHJcbmNvbnN0IGdldFNlc3Npb24gPSBuZXh0U2Vzc2lvbih7XHJcbiAgc3RvcmU6IHByb21pc2lmeVN0b3JlKG1vbmdvU3RvcmUpLFxyXG4gIGNvb2tpZToge1xyXG4gICAgaHR0cE9ubHk6IHRydWUsXHJcbiAgICBzZWN1cmU6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicsXHJcbiAgICBtYXhBZ2U6IDIgKiA3ICogMjQgKiA2MCAqIDYwLCAvLyAyIHdlZWtzLFxyXG4gICAgcGF0aDogJy8nLFxyXG4gICAgc2FtZVNpdGU6ICdzdHJpY3QnLFxyXG4gIH0sXHJcbiAgdG91Y2hBZnRlcjogMSAqIDcgKiAyNCAqIDYwICogNjAsIC8vIDEgd2Vla1xyXG59KTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIHNlc3Npb24ocmVxLCByZXMsIG5leHQpIHtcclxuICBhd2FpdCBnZXRTZXNzaW9uKHJlcSwgcmVzKTtcclxuICBuZXh0KCk7XHJcbn1cclxuIl0sIm5hbWVzIjpbImdldE1vbmdvQ2xpZW50IiwiTW9uZ29TdG9yZSIsIm5leHRTZXNzaW9uIiwicHJvbWlzaWZ5U3RvcmUiLCJtb25nb1N0b3JlIiwiY3JlYXRlIiwiY2xpZW50UHJvbWlzZSIsInN0cmluZ2lmeSIsImdldFNlc3Npb24iLCJzdG9yZSIsImNvb2tpZSIsImh0dHBPbmx5Iiwic2VjdXJlIiwicHJvY2VzcyIsIm1heEFnZSIsInBhdGgiLCJzYW1lU2l0ZSIsInRvdWNoQWZ0ZXIiLCJzZXNzaW9uIiwicmVxIiwicmVzIiwibmV4dCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./api-lib/middlewares/session.js\n");

/***/ }),

/***/ "(api)/./api-lib/mongodb.js":
/*!****************************!*\
  !*** ./api-lib/mongodb.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getMongoClient\": () => (/* binding */ getMongoClient),\n/* harmony export */   \"getMongoDb\": () => (/* binding */ getMongoDb)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n\nlet indexesCreated = false;\nasync function createIndexes(client) {\n    if (indexesCreated) return client;\n    const db = client.db();\n    await Promise.all([\n        db.collection(\"tokens\").createIndex({\n            expireAt: -1\n        }, {\n            expireAfterSeconds: 0\n        }),\n        db.collection(\"posts\").createIndexes([\n            {\n                key: {\n                    createdAt: -1\n                }\n            },\n            {\n                key: {\n                    creatorId: -1\n                }\n            }\n        ]),\n        db.collection(\"comments\").createIndexes([\n            {\n                key: {\n                    createdAt: -1\n                }\n            },\n            {\n                key: {\n                    postId: -1\n                }\n            }\n        ]),\n        db.collection(\"users\").createIndexes([\n            {\n                key: {\n                    email: 1\n                },\n                unique: true\n            },\n            {\n                key: {\n                    username: 1\n                },\n                unique: true\n            }, \n        ]), \n    ]);\n    indexesCreated = true;\n    return client;\n}\nasync function getMongoClient() {\n    /**\r\n   * Global is used here to maintain a cached connection across hot reloads\r\n   * in development. This prevents connections growing exponentiatlly\r\n   * during API Route usage.\r\n   * https://github.com/vercel/next.js/pull/17666\r\n   */ if (!global.mongoClientPromise) {\n        const client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(process.env.MONGODB_URI, {\n            tls: true,\n            tlsAllowInvalidCertificates: true,\n            serverSelectionTimeoutMS: 5000\n        });\n        // client.connect() returns an instance of MongoClient when resolved\n        global.mongoClientPromise = client.connect().then((client)=>createIndexes(client));\n    }\n    return global.mongoClientPromise;\n}\nasync function getMongoDb() {\n    const mongoClient = await getMongoClient();\n    return mongoClient.db();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9hcGktbGliL21vbmdvZGIuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFzQztBQUV0QyxJQUFJQyxjQUFjLEdBQUcsS0FBSztBQUMxQixlQUFlQyxhQUFhLENBQUNDLE1BQU0sRUFBRTtJQUNuQyxJQUFJRixjQUFjLEVBQUUsT0FBT0UsTUFBTSxDQUFDO0lBQ2xDLE1BQU1DLEVBQUUsR0FBR0QsTUFBTSxDQUFDQyxFQUFFLEVBQUU7SUFDdEIsTUFBTUMsT0FBTyxDQUFDQyxHQUFHLENBQUM7UUFDaEJGLEVBQUUsQ0FDQ0csVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUNwQkMsV0FBVyxDQUFDO1lBQUVDLFFBQVEsRUFBRSxDQUFDLENBQUM7U0FBRSxFQUFFO1lBQUVDLGtCQUFrQixFQUFFLENBQUM7U0FBRSxDQUFDO1FBQzNETixFQUFFLENBQ0NHLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FDbkJMLGFBQWEsQ0FBQztZQUFDO2dCQUFFUyxHQUFHLEVBQUU7b0JBQUVDLFNBQVMsRUFBRSxDQUFDLENBQUM7aUJBQUU7YUFBRTtZQUFFO2dCQUFFRCxHQUFHLEVBQUU7b0JBQUVFLFNBQVMsRUFBRSxDQUFDLENBQUM7aUJBQUU7YUFBRTtTQUFDLENBQUM7UUFDMUVULEVBQUUsQ0FDQ0csVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUN0QkwsYUFBYSxDQUFDO1lBQUM7Z0JBQUVTLEdBQUcsRUFBRTtvQkFBRUMsU0FBUyxFQUFFLENBQUMsQ0FBQztpQkFBRTthQUFFO1lBQUU7Z0JBQUVELEdBQUcsRUFBRTtvQkFBRUcsTUFBTSxFQUFFLENBQUMsQ0FBQztpQkFBRTthQUFFO1NBQUMsQ0FBQztRQUN2RVYsRUFBRSxDQUFDRyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUNMLGFBQWEsQ0FBQztZQUNuQztnQkFBRVMsR0FBRyxFQUFFO29CQUFFSSxLQUFLLEVBQUUsQ0FBQztpQkFBRTtnQkFBRUMsTUFBTSxFQUFFLElBQUk7YUFBRTtZQUNuQztnQkFBRUwsR0FBRyxFQUFFO29CQUFFTSxRQUFRLEVBQUUsQ0FBQztpQkFBRTtnQkFBRUQsTUFBTSxFQUFFLElBQUk7YUFBRTtTQUN2QyxDQUFDO0tBQ0gsQ0FBQyxDQUFDO0lBQ0hmLGNBQWMsR0FBRyxJQUFJLENBQUM7SUFDdEIsT0FBT0UsTUFBTSxDQUFDO0FBQ2hCLENBQUM7QUFFTSxlQUFlZSxjQUFjLEdBQUc7SUFDckM7UUFPRSxNQUFNZixNQUFNLEdBQUcsSUFBSUgsV0FBVyxDQUFDcUIsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFdBQVcsRUFBRTtZQUN0REMsR0FBRyxFQUFFLElBQUk7WUFDVEM7WUFDQUMsd0JBQXdCLEVBQUUsSUFBSTtTQUMvQixDQUFDO1FBQ0Y7UUFDQVAsTUFBTSxDQUFDQztJQUdULENBQUM7SUFDRCxPQUFPRCxNQUFNLENBQUNDLGtCQUFrQixDQUFDO0FBQ25DLENBQUM7QUFFRCxPQUFPLGVBQWVTLFVBQVUsR0FBRztJQUNqQyxNQUFNQyxXQUFXLEdBQUcsTUFBTVosY0FBYyxFQUFFO0lBQzFDO0FBQ0YsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy1tb25nb2RiLWFwcC8uL2FwaS1saWIvbW9uZ29kYi5qcz84MzkxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1vbmdvQ2xpZW50IH0gZnJvbSAnbW9uZ29kYic7XHJcblxyXG5sZXQgaW5kZXhlc0NyZWF0ZWQgPSBmYWxzZTtcclxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlSW5kZXhlcyhjbGllbnQpIHtcclxuICBpZiAoaW5kZXhlc0NyZWF0ZWQpIHJldHVybiBjbGllbnQ7XHJcbiAgY29uc3QgZGIgPSBjbGllbnQuZGIoKTtcclxuICBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICBkYlxyXG4gICAgICAuY29sbGVjdGlvbigndG9rZW5zJylcclxuICAgICAgLmNyZWF0ZUluZGV4KHsgZXhwaXJlQXQ6IC0xIH0sIHsgZXhwaXJlQWZ0ZXJTZWNvbmRzOiAwIH0pLFxyXG4gICAgZGJcclxuICAgICAgLmNvbGxlY3Rpb24oJ3Bvc3RzJylcclxuICAgICAgLmNyZWF0ZUluZGV4ZXMoW3sga2V5OiB7IGNyZWF0ZWRBdDogLTEgfSB9LCB7IGtleTogeyBjcmVhdG9ySWQ6IC0xIH0gfV0pLFxyXG4gICAgZGJcclxuICAgICAgLmNvbGxlY3Rpb24oJ2NvbW1lbnRzJylcclxuICAgICAgLmNyZWF0ZUluZGV4ZXMoW3sga2V5OiB7IGNyZWF0ZWRBdDogLTEgfSB9LCB7IGtleTogeyBwb3N0SWQ6IC0xIH0gfV0pLFxyXG4gICAgZGIuY29sbGVjdGlvbigndXNlcnMnKS5jcmVhdGVJbmRleGVzKFtcclxuICAgICAgeyBrZXk6IHsgZW1haWw6IDEgfSwgdW5pcXVlOiB0cnVlIH0sXHJcbiAgICAgIHsga2V5OiB7IHVzZXJuYW1lOiAxIH0sIHVuaXF1ZTogdHJ1ZSB9LFxyXG4gICAgXSksXHJcbiAgXSk7XHJcbiAgaW5kZXhlc0NyZWF0ZWQgPSB0cnVlO1xyXG4gIHJldHVybiBjbGllbnQ7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRNb25nb0NsaWVudCgpIHtcclxuICAvKipcclxuICAgKiBHbG9iYWwgaXMgdXNlZCBoZXJlIHRvIG1haW50YWluIGEgY2FjaGVkIGNvbm5lY3Rpb24gYWNyb3NzIGhvdCByZWxvYWRzXHJcbiAgICogaW4gZGV2ZWxvcG1lbnQuIFRoaXMgcHJldmVudHMgY29ubmVjdGlvbnMgZ3Jvd2luZyBleHBvbmVudGlhdGxseVxyXG4gICAqIGR1cmluZyBBUEkgUm91dGUgdXNhZ2UuXHJcbiAgICogaHR0cHM6Ly9naXRodWIuY29tL3ZlcmNlbC9uZXh0LmpzL3B1bGwvMTc2NjZcclxuICAgKi9cclxuICBpZiAoIWdsb2JhbC5tb25nb0NsaWVudFByb21pc2UpIHtcclxuICAgIGNvbnN0IGNsaWVudCA9IG5ldyBNb25nb0NsaWVudChwcm9jZXNzLmVudi5NT05HT0RCX1VSSSwge1xyXG4gICAgICB0bHM6IHRydWUsXHJcbiAgICAgIHRsc0FsbG93SW52YWxpZENlcnRpZmljYXRlczogdHJ1ZSxcclxuICAgICAgc2VydmVyU2VsZWN0aW9uVGltZW91dE1TOiA1MDAwLFxyXG4gICAgfSk7XHJcbiAgICAvLyBjbGllbnQuY29ubmVjdCgpIHJldHVybnMgYW4gaW5zdGFuY2Ugb2YgTW9uZ29DbGllbnQgd2hlbiByZXNvbHZlZFxyXG4gICAgZ2xvYmFsLm1vbmdvQ2xpZW50UHJvbWlzZSA9IGNsaWVudFxyXG4gICAgICAuY29ubmVjdCgpXHJcbiAgICAgIC50aGVuKChjbGllbnQpID0+IGNyZWF0ZUluZGV4ZXMoY2xpZW50KSk7XHJcbiAgfVxyXG4gIHJldHVybiBnbG9iYWwubW9uZ29DbGllbnRQcm9taXNlO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0TW9uZ29EYigpIHtcclxuICBjb25zdCBtb25nb0NsaWVudCA9IGF3YWl0IGdldE1vbmdvQ2xpZW50KCk7XHJcbiAgcmV0dXJuIG1vbmdvQ2xpZW50LmRiKCk7XHJcbn1cclxuIl0sIm5hbWVzIjpbIk1vbmdvQ2xpZW50IiwiaW5kZXhlc0NyZWF0ZWQiLCJjcmVhdGVJbmRleGVzIiwiY2xpZW50IiwiZGIiLCJQcm9taXNlIiwiYWxsIiwiY29sbGVjdGlvbiIsImNyZWF0ZUluZGV4IiwiZXhwaXJlQXQiLCJleHBpcmVBZnRlclNlY29uZHMiLCJrZXkiLCJjcmVhdGVkQXQiLCJjcmVhdG9ySWQiLCJwb3N0SWQiLCJlbWFpbCIsInVuaXF1ZSIsInVzZXJuYW1lIiwiZ2V0TW9uZ29DbGllbnQiLCJnbG9iYWwiLCJtb25nb0NsaWVudFByb21pc2UiLCJwcm9jZXNzIiwiZW52IiwiTU9OR09EQl9VUkkiLCJ0bHMiLCJ0bHNBbGxvd0ludmFsaWRDZXJ0aWZpY2F0ZXMiLCJzZXJ2ZXJTZWxlY3Rpb25UaW1lb3V0TVMiLCJjb25uZWN0IiwidGhlbiIsImdldE1vbmdvRGIiLCJtb25nb0NsaWVudCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./api-lib/mongodb.js\n");

/***/ }),

/***/ "(api)/./api-lib/nc.js":
/*!***********************!*\
  !*** ./api-lib/nc.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ncOpts\": () => (/* binding */ ncOpts)\n/* harmony export */ });\nconst ncOpts = {\n    onError (err, req, res) {\n        console.error(err);\n        res.statusCode = err.status && err.status >= 100 && err.status < 600 ? err.status : 500;\n        res.json({\n            message: err.message\n        });\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9hcGktbGliL25jLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTyxNQUFNQSxNQUFNLEdBQUc7SUFDcEJDLE9BQU8sRUFBQ0MsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLEdBQUcsRUFBRTtRQUNyQkMsT0FBTyxDQUFDQyxLQUFLLENBQUNKLEdBQUcsQ0FBQyxDQUFDO1FBQ25CRSxHQUFHLENBQUNHLFVBQVUsR0FDWkwsR0FBRyxDQUFDTSxNQUFNLElBQUlOLEdBQUcsQ0FBQ00sTUFBTSxJQUFJLEdBQUcsSUFBSU4sR0FBRyxDQUFDTSxNQUFNLEdBQUcsR0FBRyxHQUFHTixHQUFHLENBQUNNLE1BQU0sR0FBRyxHQUFHLENBQUM7UUFDekVKLEdBQUcsQ0FBQ0ssSUFBSSxDQUFDO1lBQUVDLE9BQU8sRUFBRVIsR0FBRyxDQUFDUSxPQUFPO1NBQUUsQ0FBQyxDQUFDO0lBQ3JDLENBQUM7Q0FDRixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLW1vbmdvZGItYXBwLy4vYXBpLWxpYi9uYy5qcz85YTlmIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBuY09wdHMgPSB7XHJcbiAgb25FcnJvcihlcnIsIHJlcSwgcmVzKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICByZXMuc3RhdHVzQ29kZSA9XHJcbiAgICAgIGVyci5zdGF0dXMgJiYgZXJyLnN0YXR1cyA+PSAxMDAgJiYgZXJyLnN0YXR1cyA8IDYwMCA/IGVyci5zdGF0dXMgOiA1MDA7XHJcbiAgICByZXMuanNvbih7IG1lc3NhZ2U6IGVyci5tZXNzYWdlIH0pO1xyXG4gIH0sXHJcbn07XHJcbiJdLCJuYW1lcyI6WyJuY09wdHMiLCJvbkVycm9yIiwiZXJyIiwicmVxIiwicmVzIiwiY29uc29sZSIsImVycm9yIiwic3RhdHVzQ29kZSIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./api-lib/nc.js\n");

/***/ }),

/***/ "(api)/./lib/fetch.js":
/*!**********************!*\
  !*** ./lib/fetch.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"fetcher\": () => (/* binding */ fetcher)\n/* harmony export */ });\nconst fetcher = (...args)=>{\n    return fetch(...args).then(async (res)=>{\n        let payload;\n        try {\n            if (res.status === 204) return null; // 204 does not have body\n            payload = await res.json();\n        } catch (e) {\n        /* noop */ }\n        if (res.ok) {\n            return payload;\n        } else {\n            return Promise.reject(payload.error || new Error(\"Something went wrong\"));\n        }\n    });\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZmV0Y2guanMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPLE1BQU1BLE9BQU8sR0FBRyxDQUFJQyxHQUFBQSxJQUFJLEdBQUs7SUFDbEMsT0FBT0MsS0FBSyxJQUFJRCxJQUFJLENBQUMsQ0FBQ0UsSUFBSSxDQUFDLE9BQU9DLEdBQUcsR0FBSztRQUN4QyxJQUFJQyxPQUFPO1FBQ1gsSUFBSTtZQUNGLElBQUlELEdBQUcsQ0FBQ0UsTUFBTSxLQUFLLEdBQUcsRUFBRSxPQUFPLElBQUksQ0FBQyxDQUFDLHlCQUF5QjtZQUM5REQsT0FBTyxHQUFHLE1BQU1ELEdBQUcsQ0FBQ0csSUFBSSxFQUFFLENBQUM7UUFDN0IsRUFBRSxPQUFPQyxDQUFDLEVBQUU7UUFDVixRQUFRLEdBQ1YsQ0FBQztRQUNELElBQUlKLEdBQUcsQ0FBQ0ssRUFBRSxFQUFFO1lBQ1YsT0FBT0osT0FBTyxDQUFDO1FBQ2pCLE9BQU87WUFDTCxPQUFPSyxPQUFPLENBQUNDLE1BQU0sQ0FBQ04sT0FBTyxDQUFDTyxLQUFLLElBQUksSUFBSUMsS0FBSyxDQUFDLHNCQUFzQixDQUFDLENBQUMsQ0FBQztRQUM1RSxDQUFDO0lBQ0gsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMtbW9uZ29kYi1hcHAvLi9saWIvZmV0Y2guanM/NGNjMSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgZmV0Y2hlciA9ICguLi5hcmdzKSA9PiB7XHJcbiAgcmV0dXJuIGZldGNoKC4uLmFyZ3MpLnRoZW4oYXN5bmMgKHJlcykgPT4ge1xyXG4gICAgbGV0IHBheWxvYWQ7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjA0KSByZXR1cm4gbnVsbDsgLy8gMjA0IGRvZXMgbm90IGhhdmUgYm9keVxyXG4gICAgICBwYXlsb2FkID0gYXdhaXQgcmVzLmpzb24oKTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgLyogbm9vcCAqL1xyXG4gICAgfVxyXG4gICAgaWYgKHJlcy5vaykge1xyXG4gICAgICByZXR1cm4gcGF5bG9hZDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChwYXlsb2FkLmVycm9yIHx8IG5ldyBFcnJvcignU29tZXRoaW5nIHdlbnQgd3JvbmcnKSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn07XHJcbiJdLCJuYW1lcyI6WyJmZXRjaGVyIiwiYXJncyIsImZldGNoIiwidGhlbiIsInJlcyIsInBheWxvYWQiLCJzdGF0dXMiLCJqc29uIiwiZSIsIm9rIiwiUHJvbWlzZSIsInJlamVjdCIsImVycm9yIiwiRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/fetch.js\n");

/***/ }),

/***/ "(api)/./lib/user/hooks.js":
/*!***************************!*\
  !*** ./lib/user/hooks.js ***!
  \***************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"useCurrentUser\": () => (/* binding */ useCurrentUser),\n/* harmony export */   \"useUser\": () => (/* binding */ useUser)\n/* harmony export */ });\n/* harmony import */ var _lib_fetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/fetch */ \"(api)/./lib/fetch.js\");\n/* harmony import */ var swr__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! swr */ \"swr\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([swr__WEBPACK_IMPORTED_MODULE_1__]);\nswr__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nfunction useCurrentUser() {\n    return (0,swr__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(\"/api/user\", _lib_fetch__WEBPACK_IMPORTED_MODULE_0__.fetcher);\n}\nfunction useUser(id) {\n    return (0,swr__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(`/api/users/${id}`, _lib_fetch__WEBPACK_IMPORTED_MODULE_0__.fetcher);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvdXNlci9ob29rcy5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXNDO0FBQ2I7QUFFbEIsU0FBU0UsY0FBYyxHQUFHO0lBQy9CLE9BQU9ELCtDQUFNLENBQUMsV0FBVyxFQUFFRCwrQ0FBTyxDQUFDLENBQUM7QUFDdEMsQ0FBQztBQUVNLFNBQVNHLE9BQU8sQ0FBQ0MsRUFBRSxFQUFFO0lBQzFCLE9BQU9ILCtDQUFNLENBQUMsQ0FBQyxXQUFXLEVBQUVHLEVBQUUsQ0FBQyxDQUFDLEVBQUVKLCtDQUFPLENBQUMsQ0FBQztBQUM3QyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLW1vbmdvZGItYXBwLy4vbGliL3VzZXIvaG9va3MuanM/Y2YxNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBmZXRjaGVyIH0gZnJvbSAnQC9saWIvZmV0Y2gnO1xyXG5pbXBvcnQgdXNlU1dSIGZyb20gJ3N3cic7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXNlQ3VycmVudFVzZXIoKSB7XHJcbiAgcmV0dXJuIHVzZVNXUignL2FwaS91c2VyJywgZmV0Y2hlcik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1c2VVc2VyKGlkKSB7XHJcbiAgcmV0dXJuIHVzZVNXUihgL2FwaS91c2Vycy8ke2lkfWAsIGZldGNoZXIpO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJmZXRjaGVyIiwidXNlU1dSIiwidXNlQ3VycmVudFVzZXIiLCJ1c2VVc2VyIiwiaWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/user/hooks.js\n");

/***/ }),

/***/ "(api)/./lib/user/index.js":
/*!***************************!*\
  !*** ./lib/user/index.js ***!
  \***************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _hooks__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./hooks */ \"(api)/./lib/user/hooks.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ \"(api)/./lib/user/utils.js\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _utils__WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _utils__WEBPACK_IMPORTED_MODULE_1__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_hooks__WEBPACK_IMPORTED_MODULE_0__]);\n_hooks__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _hooks__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _hooks__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvdXNlci9pbmRleC5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBd0I7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy1tb25nb2RiLWFwcC8uL2xpYi91c2VyL2luZGV4LmpzP2YzMTEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi9ob29rcyc7XHJcbmV4cG9ydCAqIGZyb20gJy4vdXRpbHMnO1xyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/user/index.js\n");

/***/ }),

/***/ "(api)/./lib/user/utils.js":
/*!***************************!*\
  !*** ./lib/user/utils.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"slugUsername\": () => (/* binding */ slugUsername)\n/* harmony export */ });\n/* harmony import */ var slug__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! slug */ \"slug\");\n/* harmony import */ var slug__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(slug__WEBPACK_IMPORTED_MODULE_0__);\n\nconst slugUsername = (username)=>slug__WEBPACK_IMPORTED_MODULE_0___default()(username, \"_\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvdXNlci91dGlscy5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBd0I7QUFFakIsTUFBTUMsWUFBWSxHQUFHLENBQUNDLFFBQVEsR0FBS0YsMkNBQUksQ0FBQ0UsUUFBUSxFQUFFLEdBQUcsQ0FBQyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLW1vbmdvZGItYXBwLy4vbGliL3VzZXIvdXRpbHMuanM/ZmExNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgc2x1ZyBmcm9tICdzbHVnJztcclxuXHJcbmV4cG9ydCBjb25zdCBzbHVnVXNlcm5hbWUgPSAodXNlcm5hbWUpID0+IHNsdWcodXNlcm5hbWUsICdfJyk7XHJcbiJdLCJuYW1lcyI6WyJzbHVnIiwic2x1Z1VzZXJuYW1lIiwidXNlcm5hbWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/user/utils.js\n");

/***/ }),

/***/ "(api)/./pages/api/user/index.js":
/*!*********************************!*\
  !*** ./pages/api/user/index.js ***!
  \*********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"config\": () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _api_lib_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/api-lib/constants */ \"(api)/./api-lib/constants.js\");\n/* harmony import */ var _api_lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/api-lib/db */ \"(api)/./api-lib/db/index.js\");\n/* harmony import */ var _api_lib_middlewares__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/api-lib/middlewares */ \"(api)/./api-lib/middlewares/index.js\");\n/* harmony import */ var _api_lib_mongodb__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/api-lib/mongodb */ \"(api)/./api-lib/mongodb.js\");\n/* harmony import */ var _api_lib_nc__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/api-lib/nc */ \"(api)/./api-lib/nc.js\");\n/* harmony import */ var _lib_user__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/lib/user */ \"(api)/./lib/user/index.js\");\n/* harmony import */ var cloudinary__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! cloudinary */ \"cloudinary\");\n/* harmony import */ var cloudinary__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(cloudinary__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! multer */ \"multer\");\n/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(multer__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var next_connect__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next-connect */ \"next-connect\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_10__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_api_lib_db__WEBPACK_IMPORTED_MODULE_1__, _api_lib_middlewares__WEBPACK_IMPORTED_MODULE_2__, _lib_user__WEBPACK_IMPORTED_MODULE_5__, next_connect__WEBPACK_IMPORTED_MODULE_8__]);\n([_api_lib_db__WEBPACK_IMPORTED_MODULE_1__, _api_lib_middlewares__WEBPACK_IMPORTED_MODULE_2__, _lib_user__WEBPACK_IMPORTED_MODULE_5__, next_connect__WEBPACK_IMPORTED_MODULE_8__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\n\n\n\nconst upload = multer__WEBPACK_IMPORTED_MODULE_7___default()({\n    dest: \"/tmp\"\n});\nconst handler = (0,next_connect__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(_api_lib_nc__WEBPACK_IMPORTED_MODULE_4__.ncOpts);\nif (process.env.CLOUDINARY_URL) {\n    const { hostname: cloud_name , username: api_key , password: api_secret ,  } = new URL(process.env.CLOUDINARY_URL);\n    cloudinary__WEBPACK_IMPORTED_MODULE_6__.v2.config({\n        cloud_name,\n        api_key,\n        api_secret\n    });\n}\nhandler.use(..._api_lib_middlewares__WEBPACK_IMPORTED_MODULE_2__.auths);\nhandler.get(async (req, res)=>{\n    if (!req.user) return res.json({\n        user: null\n    });\n    return res.json({\n        user: req.user\n    });\n});\nhandler.patch(upload.single(\"profilePicture\"), (0,_api_lib_middlewares__WEBPACK_IMPORTED_MODULE_2__.validateBody)({\n    type: \"object\",\n    properties: {\n        username: _api_lib_constants__WEBPACK_IMPORTED_MODULE_0__.ValidateProps.user.username,\n        name: _api_lib_constants__WEBPACK_IMPORTED_MODULE_0__.ValidateProps.user.name,\n        bio: _api_lib_constants__WEBPACK_IMPORTED_MODULE_0__.ValidateProps.user.bio\n    },\n    additionalProperties: true\n}), async (req, res)=>{\n    if (!req.user) {\n        req.status(401).end();\n        return;\n    }\n    const db = await (0,_api_lib_mongodb__WEBPACK_IMPORTED_MODULE_3__.getMongoDb)();\n    let profilePicture;\n    if (req.file) {\n        if (process.env.CLOUDINARY_URL) {\n            //  Cloudinary  \n            const image = await cloudinary__WEBPACK_IMPORTED_MODULE_6__.v2.uploader.upload(req.file.path, {\n                width: 512,\n                height: 512,\n                crop: \"fill\"\n            });\n            profilePicture = image.secure_url;\n        } else {\n            //    \n            const fileName = `avatar-${req.user._id}-${Date.now()}${path__WEBPACK_IMPORTED_MODULE_10___default().extname(req.file.originalname || \".jpg\")}`;\n            const uploadDir = path__WEBPACK_IMPORTED_MODULE_10___default().join(process.cwd(), \"public\", \"uploads\", \"avatars\");\n            const filePath = path__WEBPACK_IMPORTED_MODULE_10___default().join(uploadDir, fileName);\n            //     \n            fs__WEBPACK_IMPORTED_MODULE_9___default().copyFileSync(req.file.path, filePath);\n            fs__WEBPACK_IMPORTED_MODULE_9___default().unlinkSync(req.file.path); //   \n            profilePicture = `/uploads/avatars/${fileName}`;\n        }\n    }\n    const { name , bio  } = req.body;\n    let username;\n    if (req.body.username) {\n        username = (0,_lib_user__WEBPACK_IMPORTED_MODULE_5__.slugUsername)(req.body.username);\n        if (username !== req.user.username && await (0,_api_lib_db__WEBPACK_IMPORTED_MODULE_1__.findUserByUsername)(db, username)) {\n            res.status(403).json({\n                error: {\n                    message: \"The username has already been taken.\"\n                }\n            });\n            return;\n        }\n    }\n    const user = await (0,_api_lib_db__WEBPACK_IMPORTED_MODULE_1__.updateUserById)(db, req.user._id, {\n        ...username && {\n            username\n        },\n        ...name && {\n            name\n        },\n        ...typeof bio === \"string\" && {\n            bio\n        },\n        ...profilePicture && {\n            profilePicture\n        }\n    });\n    res.json({\n        user\n    });\n});\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (handler);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QSxRQUFRO1NBQUU7UUFDNUIsR0FBSWdCLElBQUksSUFBSTtZQUFFQSxJQUFJO1NBQUU7UUFDcEIsR0FBSSxPQUFPQyxHQUFHLEtBQUssUUFBUSxJQUFJO1lBQUVBLEdBQUc7U0FBRTtRQUN0QyxHQUFJSyxjQUFjLElBQUk7WUFBRUEsY0FBYztTQUFFO0tBQ3pDLENBQUM7SUFFRmIsR0FBRyxDQUFDRSxJQUFJLENBQUM7UUFBRUQsSUFBSTtLQUFFLENBQUMsQ0FBQztBQUNyQixDQUFDLENBQ0YsQ0FBQztBQUVLLE1BQU1MLE1BQU0sR0FBRztJQUNwQndDLEdBQUcsRUFBRTtRQUNIQyxVQUFVLEVBQUUsS0FBSztLQUNsQjtDQUNGLENBQUM7QUFFRixpRUFBZXBELE9BQU8sRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy1tb25nb2RiLWFwcC8uL3BhZ2VzL2FwaS91c2VyL2luZGV4LmpzPzU3Y2IiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVmFsaWRhdGVQcm9wcyB9IGZyb20gJ0AvYXBpLWxpYi9jb25zdGFudHMnO1xyXG5pbXBvcnQgeyBmaW5kVXNlckJ5VXNlcm5hbWUsIHVwZGF0ZVVzZXJCeUlkIH0gZnJvbSAnQC9hcGktbGliL2RiJztcclxuaW1wb3J0IHsgYXV0aHMsIHZhbGlkYXRlQm9keSB9IGZyb20gJ0AvYXBpLWxpYi9taWRkbGV3YXJlcyc7XHJcbmltcG9ydCB7IGdldE1vbmdvRGIgfSBmcm9tICdAL2FwaS1saWIvbW9uZ29kYic7XHJcbmltcG9ydCB7IG5jT3B0cyB9IGZyb20gJ0AvYXBpLWxpYi9uYyc7XHJcbmltcG9ydCB7IHNsdWdVc2VybmFtZSB9IGZyb20gJ0AvbGliL3VzZXInO1xyXG5pbXBvcnQgeyB2MiBhcyBjbG91ZGluYXJ5IH0gZnJvbSAnY2xvdWRpbmFyeSc7XHJcbmltcG9ydCBtdWx0ZXIgZnJvbSAnbXVsdGVyJztcclxuaW1wb3J0IG5jIGZyb20gJ25leHQtY29ubmVjdCc7XHJcbmltcG9ydCBmcyBmcm9tICdmcyc7XHJcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xyXG5cclxuY29uc3QgdXBsb2FkID0gbXVsdGVyKHsgZGVzdDogJy90bXAnIH0pO1xyXG5jb25zdCBoYW5kbGVyID0gbmMobmNPcHRzKTtcclxuXHJcbmlmIChwcm9jZXNzLmVudi5DTE9VRElOQVJZX1VSTCkge1xyXG4gIGNvbnN0IHtcclxuICAgIGhvc3RuYW1lOiBjbG91ZF9uYW1lLFxyXG4gICAgdXNlcm5hbWU6IGFwaV9rZXksXHJcbiAgICBwYXNzd29yZDogYXBpX3NlY3JldCxcclxuICB9ID0gbmV3IFVSTChwcm9jZXNzLmVudi5DTE9VRElOQVJZX1VSTCk7XHJcblxyXG4gIGNsb3VkaW5hcnkuY29uZmlnKHtcclxuICAgIGNsb3VkX25hbWUsXHJcbiAgICBhcGlfa2V5LFxyXG4gICAgYXBpX3NlY3JldCxcclxuICB9KTtcclxufVxyXG5cclxuaGFuZGxlci51c2UoLi4uYXV0aHMpO1xyXG5cclxuaGFuZGxlci5nZXQoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgaWYgKCFyZXEudXNlcikgcmV0dXJuIHJlcy5qc29uKHsgdXNlcjogbnVsbCB9KTtcclxuICByZXR1cm4gcmVzLmpzb24oeyB1c2VyOiByZXEudXNlciB9KTtcclxufSk7XHJcblxyXG5oYW5kbGVyLnBhdGNoKFxyXG4gIHVwbG9hZC5zaW5nbGUoJ3Byb2ZpbGVQaWN0dXJlJyksXHJcbiAgdmFsaWRhdGVCb2R5KHtcclxuICAgIHR5cGU6ICdvYmplY3QnLFxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICB1c2VybmFtZTogVmFsaWRhdGVQcm9wcy51c2VyLnVzZXJuYW1lLFxyXG4gICAgICBuYW1lOiBWYWxpZGF0ZVByb3BzLnVzZXIubmFtZSxcclxuICAgICAgYmlvOiBWYWxpZGF0ZVByb3BzLnVzZXIuYmlvLFxyXG4gICAgfSxcclxuICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiB0cnVlLFxyXG4gIH0pLFxyXG4gIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgaWYgKCFyZXEudXNlcikge1xyXG4gICAgICByZXEuc3RhdHVzKDQwMSkuZW5kKCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBkYiA9IGF3YWl0IGdldE1vbmdvRGIoKTtcclxuXHJcbiAgICBsZXQgcHJvZmlsZVBpY3R1cmU7XHJcbiAgICBpZiAocmVxLmZpbGUpIHtcclxuICAgICAgaWYgKHByb2Nlc3MuZW52LkNMT1VESU5BUllfVVJMKSB7XHJcbiAgICAgICAgLy8g0JLQuNC60L7RgNC40YHRgtC+0LLRg9GU0LzQviBDbG91ZGluYXJ5INGP0LrRidC+INC90LDQu9Cw0YjRgtC+0LLQsNC90LjQuVxyXG4gICAgICAgIGNvbnN0IGltYWdlID0gYXdhaXQgY2xvdWRpbmFyeS51cGxvYWRlci51cGxvYWQocmVxLmZpbGUucGF0aCwge1xyXG4gICAgICAgICAgd2lkdGg6IDUxMixcclxuICAgICAgICAgIGhlaWdodDogNTEyLFxyXG4gICAgICAgICAgY3JvcDogJ2ZpbGwnLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHByb2ZpbGVQaWN0dXJlID0gaW1hZ2Uuc2VjdXJlX3VybDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyDQl9Cx0LXRgNGW0LPQsNGU0LzQviDQu9C+0LrQsNC70YzQvdC+INC00LvRjyDRgNC+0LfRgNC+0LHQutC4XHJcbiAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBgYXZhdGFyLSR7cmVxLnVzZXIuX2lkfS0ke0RhdGUubm93KCl9JHtwYXRoLmV4dG5hbWUocmVxLmZpbGUub3JpZ2luYWxuYW1lIHx8ICcuanBnJyl9YDtcclxuICAgICAgICBjb25zdCB1cGxvYWREaXIgPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3B1YmxpYycsICd1cGxvYWRzJywgJ2F2YXRhcnMnKTtcclxuICAgICAgICBjb25zdCBmaWxlUGF0aCA9IHBhdGguam9pbih1cGxvYWREaXIsIGZpbGVOYW1lKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyDQmtC+0L/RltGO0ZTQvNC+INGE0LDQudC7INC3INGC0LjQvNGH0LDRgdC+0LLQvtGXINC/0LDQv9C60LhcclxuICAgICAgICBmcy5jb3B5RmlsZVN5bmMocmVxLmZpbGUucGF0aCwgZmlsZVBhdGgpO1xyXG4gICAgICAgIGZzLnVubGlua1N5bmMocmVxLmZpbGUucGF0aCk7IC8vINCS0LjQtNCw0LvRj9GU0LzQviDRgtC40LzRh9Cw0YHQvtCy0LjQuSDRhNCw0LnQu1xyXG4gICAgICAgIFxyXG4gICAgICAgIHByb2ZpbGVQaWN0dXJlID0gYC91cGxvYWRzL2F2YXRhcnMvJHtmaWxlTmFtZX1gO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCB7IG5hbWUsIGJpbyB9ID0gcmVxLmJvZHk7XHJcblxyXG4gICAgbGV0IHVzZXJuYW1lO1xyXG5cclxuICAgIGlmIChyZXEuYm9keS51c2VybmFtZSkge1xyXG4gICAgICB1c2VybmFtZSA9IHNsdWdVc2VybmFtZShyZXEuYm9keS51c2VybmFtZSk7XHJcbiAgICAgIGlmIChcclxuICAgICAgICB1c2VybmFtZSAhPT0gcmVxLnVzZXIudXNlcm5hbWUgJiZcclxuICAgICAgICAoYXdhaXQgZmluZFVzZXJCeVVzZXJuYW1lKGRiLCB1c2VybmFtZSkpXHJcbiAgICAgICkge1xyXG4gICAgICAgIHJlc1xyXG4gICAgICAgICAgLnN0YXR1cyg0MDMpXHJcbiAgICAgICAgICAuanNvbih7IGVycm9yOiB7IG1lc3NhZ2U6ICdUaGUgdXNlcm5hbWUgaGFzIGFscmVhZHkgYmVlbiB0YWtlbi4nIH0gfSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHVwZGF0ZVVzZXJCeUlkKGRiLCByZXEudXNlci5faWQsIHtcclxuICAgICAgLi4uKHVzZXJuYW1lICYmIHsgdXNlcm5hbWUgfSksXHJcbiAgICAgIC4uLihuYW1lICYmIHsgbmFtZSB9KSxcclxuICAgICAgLi4uKHR5cGVvZiBiaW8gPT09ICdzdHJpbmcnICYmIHsgYmlvIH0pLFxyXG4gICAgICAuLi4ocHJvZmlsZVBpY3R1cmUgJiYgeyBwcm9maWxlUGljdHVyZSB9KSxcclxuICAgIH0pO1xyXG5cclxuICAgIHJlcy5qc29uKHsgdXNlciB9KTtcclxuICB9XHJcbik7XHJcblxyXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xyXG4gIGFwaToge1xyXG4gICAgYm9keVBhcnNlcjogZmFsc2UsXHJcbiAgfSxcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGhhbmRsZXI7XHJcbiJdLCJuYW1lcyI6WyJWYWxpZGF0ZVByb3BzIiwiZmluZFVzZXJCeVVzZXJuYW1lIiwidXBkYXRlVXNlckJ5SWQiLCJhdXRocyIsInZhbGlkYXRlQm9keSIsImdldE1vbmdvRGIiLCJuY09wdHMiLCJzbHVnVXNlcm5hbWUiLCJ2MiIsImNsb3VkaW5hcnkiLCJtdWx0ZXIiLCJuYyIsImZzIiwicGF0aCIsInVwbG9hZCIsImRlc3QiLCJoYW5kbGVyIiwicHJvY2VzcyIsImVudiIsIkNMT1VESU5BUllfVVJMIiwiaG9zdG5hbWUiLCJjbG91ZF9uYW1lIiwidXNlcm5hbWUiLCJhcGlfa2V5IiwicGFzc3dvcmQiLCJhcGlfc2VjcmV0IiwiVVJMIiwiY29uZmlnIiwidXNlIiwiZ2V0IiwicmVxIiwicmVzIiwidXNlciIsImpzb24iLCJwYXRjaCIsInNpbmdsZSIsInR5cGUiLCJwcm9wZXJ0aWVzIiwibmFtZSIsImJpbyIsImFkZGl0aW9uYWxQcm9wZXJ0aWVzIiwic3RhdHVzIiwiZW5kIiwiZGIiLCJwcm9maWxlUGljdHVyZSIsImZpbGUiLCJpbWFnZSIsInVwbG9hZGVyIiwid2lkdGgiLCJoZWlnaHQiLCJjcm9wIiwic2VjdXJlX3VybCIsImZpbGVOYW1lIiwiX2lkIiwiRGF0ZSIsIm5vdyIsImV4dG5hbWUiLCJvcmlnaW5hbG5hbWUiLCJ1cGxvYWREaXIiLCJqb2luIiwiY3dkIiwiZmlsZVBhdGgiLCJjb3B5RmlsZVN5bmMiLCJ1bmxpbmtTeW5jIiwiYm9keSIsImVycm9yIiwibWVzc2FnZSIsImFwaSIsImJvZHlQYXJzZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/user/index.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/user/index.js"));
module.exports = __webpack_exports__;

})();